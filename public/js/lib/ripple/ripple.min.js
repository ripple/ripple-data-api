var ripple=function(a){function c(d){if(typeof d!="number")throw new Error("Cannot find module '"+d+"'");if(b[d])return b[d].exports;var e=b[d]={exports:{},id:d,loaded:!1};return a[d](e,e.exports,c),e.loaded=!0,e.exports}var b={};return c.e=function(a,b){b(c)},c.modules=a,c.cache=b,c(0)}({c:"",0:function(a,b,c){b.Remote=c(21).Remote,b.Amount=c(2).Amount,b.UInt160=c(2).UInt160,b.Seed=c(2).Seed,b.sjcl=c(3),b.config=c(6)},1:function(a,b,c){var d=function(){return this.console||this.window&&this.window.console||{}}();a.exports=d;for(var e in{log:1,info:1,error:1,warn:1,dir:1,trace:1,assert:1})d[e]||(d[e]=function(){});var f={};d.time||(d.time=function(a){f[a]=Date.now()}),d.timeEnd||(d.timeEnd=function(){var a=Date.now()-f[label];d.log("%s: %dms",label,a)})},2:function(a,b,c){var d=c(3),e=d.bn,f=c(5),g=c(7),h=g.BigInteger,i=c(10).UInt160,j=c(15).Seed,k=c(14).Currency,l=b.consts={currency_xns:0,currency_one:1,xns_precision:6,bi_5:new h("5"),bi_7:new h("7"),bi_10:new h("10"),bi_1e14:new h(String(1e14)),bi_1e16:new h(String(1e16)),bi_1e17:new h(String(1e17)),bi_1e32:new h("100000000000000000000000000000000"),bi_man_max_value:new h("9999999999999999"),bi_man_min_value:new h("1000000000000000"),bi_xns_max:new h("9000000000000000000"),bi_xns_min:new h("-9000000000000000000"),bi_xns_unit:new h("1000000"),cMinOffset:-96,cMaxOffset:80},m=function(){this._value=new h,this._offset=0,this._is_native=!0,this._is_negative=!1,this._currency=new k,this._issuer=new i};m.text_full_rewrite=function(a){return m.from_json(a).to_text_full()},m.json_rewrite=function(a){return m.from_json(a).to_json()},m.from_json=function(a){return(new m).parse_json(a)},m.from_human=function(a){return(new m).parse_human(a)},m.is_valid=function(a){return m.from_json(a).is_valid()},m.is_valid_full=function(a){return m.from_json(a).is_valid_full()},m.NaN=function(){var a=new m;return a._value=NaN,a},m.prototype.abs=function(){return this.clone(this.is_negative())},m.prototype.add=function(a){var b;if(!this.is_comparable(a))b=m.NaN();else if(this._is_native){b=new m;var c=this._is_negative?this._value.negate():this._value,d=a._is_negative?a._value.negate():a._value,e=c.add(d);b._is_negative=e.compareTo(h.ZERO)<0,b._value=b._is_negative?e.negate():e}else if(a.is_zero())b=this;else if(this.is_zero())b=a.clone(),b._currency=this._currency.clone(),b._issuer=this._issuer.clone();else{var c=this._is_negative?this._value.negate():this._value,f=this._offset,d=a._is_negative?a._value.negate():a._value,g=a._offset;while(f<g)c=c.divide(l.bi_10),f+=1;while(g<f)d=d.divide(l.bi_10),g+=1;b=new m,b._is_native=!1,b._offset=f,b._value=c.add(d),b._is_negative=b._value.compareTo(h.ZERO)<0,b._is_negative&&(b._value=b._value.negate()),b._currency=this._currency.clone(),b._issuer=this._issuer.clone(),b.canonicalize()}return b},m.prototype.canonicalize=function(){if(this._value instanceof h)if(this._is_native)if(this._value.equals(h.ZERO))this._offset=0,this._is_negative=!1;else{while(this._offset<0)this._value=this._value.divide(l.bi_10),this._offset+=1;while(this._offset>0)this._value=this._value.multiply(l.bi_10),this._offset-=1}else if(this.is_zero())this._offset=-100,this._is_negative=!1;else{while(this._value.compareTo(l.bi_man_min_value)<0)this._value=this._value.multiply(l.bi_10),this._offset-=1;while(this._value.compareTo(l.bi_man_max_value)>0)this._value=this._value.divide(l.bi_10),this._offset+=1}return this},m.prototype.clone=function(a){return this.copyTo(new m,a)},m.prototype.compareTo=function(a){var b;return this.is_comparable(a)?this._is_native?(b=this._value.compareTo(a._value),b>1?b=1:b<-1&&(b=-1)):this._is_negative!==a._is_negative?b=this._is_negative?-1:1:this._value.equals(h.ZERO)?b=a._is_negative?1:a._value.equals(h.ZERO)?0:1:a._value.equals(h.ZERO)?b=1:this._offset>a._offset?b=this._is_negative?-1:1:this._offset<a._offset?b=this._is_negative?1:-1:(b=this._value.compareTo(a._value),b>1?b=1:b<-1&&(b=-1)):b=m.NaN(),b},m.prototype.copyTo=function(a,b){return"object"==typeof this._value?this._value.copyTo(a._value):a._value=this._value,a._offset=this._offset,a._is_native=this._is_native,a._is_negative=b?!this._is_negative:this._is_negative,this._currency.copyTo(a._currency),this._issuer.copyTo(a._issuer),a.is_zero()&&(a._is_negative=!1),a},m.prototype.currency=function(){return this._currency},m.prototype.equals=function(a,b){if("string"==typeof a)return this.equals(m.from_json(a));if(this===a)return!0;if(a instanceof m){if(!this.is_valid()||!a.is_valid())return!1;if(this._is_native!==a._is_native)return!1;if(!this._value.equals(a._value)||this._offset!==a._offset)return!1;if(this._is_negative!==a._is_negative)return!1;if(!this._is_native){if(!this._currency.equals(a._currency))return!1;if(!b&&!this._issuer.equals(a._issuer))return!1}return!0}return!1},m.prototype.divide=function(a){var b;if(a.is_zero())throw"divide by zero";if(this.is_zero())b=this.clone();else{if(!this.is_valid())throw new Error("Invalid dividend");if(!a.is_valid())throw new Error("Invalid divisor");b=new m,b._offset=this._offset-a._offset-17,b._value=this._value.multiply(l.bi_1e17).divide(a._value).add(l.bi_5),b._is_native=this._is_native,b._is_negative=this._is_negative!==a._is_negative,b._currency=this._currency.clone(),b._issuer=this._issuer.clone(),b.canonicalize()}return b},m.prototype.ratio_human=function(a){"number"==typeof a&&parseInt(a)===a?a=m.from_json(""+a+".0"):a=m.from_json(a);var b=this;return a=m.from_json(a),a._is_native&&(b=b.clone(),b._value=b._value.multiply(l.bi_xns_unit),b.canonicalize()),b.divide(a)},m.prototype.product_human=function(a){"number"==typeof a&&parseInt(a)===a?a=m.from_json(""+a+".0"):a=m.from_json(a);var b=this.multiply(a);return a._is_native&&(b._value=b._value.divide(l.bi_xns_unit),b.canonicalize()),b},m.prototype.is_comparable=function(a){return this._value instanceof h&&a._value instanceof h&&this._is_native===a._is_native},m.prototype.is_native=function(){return this._is_native},m.prototype.is_negative=function(){return this._value instanceof h?this._is_negative:!1},m.prototype.is_positive=function(){return!this.is_zero()&&!this.is_negative()},m.prototype.is_valid=function(){return this._value instanceof h},m.prototype.is_valid_full=function(){return this.is_valid()&&this._currency.is_valid()&&this._issuer.is_valid()},m.prototype.is_zero=function(){return this._value instanceof h?this._value.equals(h.ZERO):!1},m.prototype.issuer=function(){return this._issuer},m.prototype.multiply=function(a){var b;if(this.is_zero())b=this.clone();else if(a.is_zero())b=this.clone(),b._value=h.ZERO.clone();else{var c=this._value,d=this._offset,e=a._value,f=a._offset;while(c.compareTo(l.bi_man_min_value)<0)c=c.multiply(l.bi_10),d-=1;while(e.compareTo(l.bi_man_min_value)<0)e=e.multiply(l.bi_10),f-=1;b=new m,b._offset=d+f+14,b._value=c.multiply(e).divide(l.bi_1e14).add(l.bi_7),b._is_native=this._is_native,b._is_negative=this._is_negative!==a._is_negative,b._currency=this._currency.clone(),b._issuer=this._issuer.clone(),b.canonicalize()}return b},m.prototype.negate=function(){return this.clone("NEGATE")},m.prototype.parse_human=function(a){a=""+a;var b=a.match(/^\s*([a-z]{3})?\s*(-)?(\d+)(?:\.(\d*))?\s*([a-z]{3})?\s*$/i);if(b){var c=b[1]||b[5]||"XRP",d=b[3]||"0",e=b[4]||"",f=null;c=c.toUpperCase(),this._value=new h(d),this.set_currency(c);if(c==="XRP"){e=e.slice(0,6);while(e.length<6)e+="0";this._is_native=!0,this._value=this._value.multiply(l.bi_xns_unit).add(new h(e))}else{while(e[e.length-1]==="0")e=e.slice(0,e.length-1);f=e.length,this._is_native=!1;var g=l.bi_10.clone().pow(f);this._value=this._value.multiply(g).add(new h(e)),this._offset=-f,this.canonicalize()}this._is_negative=!!b[2]}else this._value=NaN;return this},m.prototype.parse_issuer=function(a){return this._issuer.parse_json(a),this},m.prototype.parse_json=function(a){if("string"==typeof a){var b=a.match(/^(.+)\/(...)\/(.+)$/);b?(this._currency=k.from_json(b[2]),this._issuer=i.from_json(b[3]),this.parse_value(b[1])):(this.parse_native(a),this._currency=new k,this._issuer=new i)}else"number"==typeof a?this.parse_json(""+a):"object"==typeof a&&a instanceof m?a.copyTo(this):"object"==typeof a&&"value"in a?(this._currency.parse_json(a.currency),"string"==typeof a.issuer&&this._issuer.parse_json(a.issuer),this.parse_value(a.value)):this._value=NaN;return this},m.prototype.parse_native=function(a){var b;"string"==typeof a&&(b=a.match(/^(-?)(\d*)(\.\d{0,6})?$/));if(b){if(undefined===b[3])this._value=new h(b[2]);else{var c=(new h(b[2])).multiply(l.bi_xns_unit),d=(new h(b[3])).multiply(new h(String(Math.pow(10,1+l.xns_precision-b[3].length))));this._value=c.add(d)}this._is_native=!0,this._offset=0,this._is_negative=!!b[1]&&this._value.compareTo(h.ZERO)!==0,this._value.compareTo(l.bi_xns_max)>0&&(this._value=NaN)}else this._value=NaN;return this},m.prototype.parse_value=function(a){this._is_native=!1;if("number"==typeof a)this._is_negative=a<0,this._value=new h(this._is_negative?-a:a),this._offset=0,this.canonicalize();else if("string"==typeof a){var b=a.match(/^(-?)(\d+)$/),c=!b&&a.match(/^(-?)(\d*)\.(\d*)$/),d=!d&&a.match(/^(-?)(\d*)e(-?\d+)$/);if(d)this._value=new h(d[2]),this._offset=parseInt(d[3]),this._is_negative=!!d[1],this.canonicalize();else if(c){var e=new h(c[2]),f=new h(c[3]),g=c[3].length;this._value=e.multiply(l.bi_10.clone().pow(g)).add(f),this._offset=-g,this._is_negative=!!c[1],this.canonicalize()}else b?(this._value=new h(b[2]),this._offset=0,this._is_negative=!!b[1],this.canonicalize()):this._value=NaN}else a instanceof h?this._value=a.clone():this._value=NaN;return this},m.prototype.set_currency=function(a){return"string"==typeof a?this._currency.parse_json(a):a.copyTo(this._currency),this._is_native=this._currency.is_native(),this},m.prototype.set_issuer=function(a){return a instanceof i?a.copyTo(this._issuer):this._issuer.parse_json(a),this},m.prototype.subtract=function(a){return this.add(a.negate())},m.prototype.to_number=function(a){var b=this.to_text(a);return"string"==typeof b?Number(b):b},m.prototype.to_text=function(a){if(this._value instanceof h){if(this._is_native)return this._value.compareTo(l.bi_xns_max)>0?a?NaN:"0":(this._is_negative?"-":"")+this._value.toString();if(this.is_zero())return"0";if(this._offset&&(this._offset<-25||this._offset>-4))return(this._is_negative?"-":"")+this._value.toString()+"e"+this._offset;var b="000000000000000000000000000"+this._value.toString()+"00000000000000000000000",c=b.substring(0,this._offset+43),d=b.substring(this._offset+43),e=c.match(/[1-9].*$/),f=d.match(/[1-9]0*$/);return(this._is_negative?"-":"")+(e?e[0]:"0")+(f?"."+d.substring(0,1+d.length-f[0].length):"")}return a?NaN:"0"},m.prototype.to_human=function(a){a=a||{};if(!this.is_valid())return"";"undefined"==typeof a.signed&&(a.signed=!0),"undefined"==typeof a.group_sep&&(a.group_sep=!0),a.group_width=a.group_width||3;var b=this._is_native?l.xns_precision:-this._offset,c=l.bi_10.clone().pow(b),d=this._value.divide(c).toString(10),e=this._value.mod(c).toString(10);while(e.length<b)e="0"+e;d=d.replace(/^0*/,""),e=e.replace(/0*$/,"");if(e.length||!a.skip_empty_fraction){"number"==typeof a.precision&&(e=e.slice(0,a.precision));if("number"==typeof a.min_precision)while(e.length<a.min_precision)e+="0"}a.group_sep&&("string"!=typeof a.group_sep&&(a.group_sep=","),d=f.chunkString(d,a.group_width,!0).join(a.group_sep));var g="";return a.signed&&this._is_negative&&("string"!=typeof a.signed&&(a.signed="-"),g+=a.signed),g+=d.length?d:"0",g+=e.length?"."+e:"",g},m.prototype.to_human_full=function(a){a=a||{};var b=this.to_human(a),c=this._currency.to_human(),d=this._issuer.to_json(a),e;return this._is_native?e=b+"/"+c:e=b+"/"+c+"/"+d,e},m.prototype.to_json=function(){if(this._is_native)return this.to_text();var a={value:this.to_text(),currency:this._currency.to_json()};return this._issuer.is_valid()&&(a.issuer=this._issuer.to_json()),a},m.prototype.to_text_full=function(a){return this._value instanceof h?this._is_native?this.to_text()+"/XRP":this.to_text()+"/"+this._currency.to_json()+"/"+this._issuer.to_json(a):NaN},m.prototype.not_equals_why=function(a,b){if("string"==typeof a)return this.not_equals_why(m.from_json(a));if(this===a)return!1;if(a instanceof m){if(!this.is_valid()||!a.is_valid())return"Invalid amount.";if(this._is_native!==a._is_native)return"Native mismatch.";var c=this._is_native?"XRP":"Non-XRP";if(!this._value.equals(a._value)||this._offset!==a._offset)return c+" value differs.";if(this._is_negative!==a._is_negative)return c+" sign differs.";if(!this._is_native){if(!this._currency.equals(a._currency))return"Non-XRP currency differs.";if(!b&&!this._issuer.equals(a._issuer))return"Non-XRP issuer differs."}return!1}return"Wrong constructor."},b.Amount=m,b.Currency=k,b.Seed=j,b.UInt160=i},3:function(a,b,c){"use strict";var d={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(a){this.toString=function(){return"CORRUPT: "+this.message},this.message=a},invalid:function(a){this.toString=function(){return"INVALID: "+this.message},this.message=a},bug:function(a){this.toString=function(){return"BUG: "+this.message},this.message=a},notReady:function(a){this.toString=function(){return"NOT READY: "+this.message},this.message=a}}};typeof a!="undefined"&&a.exports&&(a.exports=d),d.cipher.aes=function(a){this._tables[0][0][0]||this._precompute();var b,c,e,f,g,h=this._tables[0][4],i=this._tables[1],j=a.length,k=1;if(j!==4&&j!==6&&j!==8)throw new d.exception.invalid("invalid aes key size");this._key=[f=a.slice(0),g=[]];for(b=j;b<4*j+28;b++){e=f[b-1];if(b%j===0||j===8&&b%j===4)e=h[e>>>24]<<24^h[e>>16&255]<<16^h[e>>8&255]<<8^h[e&255],b%j===0&&(e=e<<8^e>>>24^k<<24,k=k<<1^(k>>7)*283);f[b]=f[b-j]^e}for(c=0;b;c++,b--)e=f[c&3?b:b-4],b<=4||c<4?g[c]=e:g[c]=i[0][h[e>>>24]]^i[1][h[e>>16&255]]^i[2][h[e>>8&255]]^i[3][h[e&255]]},d.cipher.aes.prototype={encrypt:function(a){return this._crypt(a,0)},decrypt:function(a){return this._crypt(a,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var a=this._tables[0],b=this._tables[1],c=a[4],d=b[4],e,f,g,h=[],i=[],j,k,l,m,n,o;for(e=0;e<256;e++)i[(h[e]=e<<1^(e>>7)*283)^e]=e;for(f=g=0;!c[f];f^=j||1,g=i[g]||1){m=g^g<<1^g<<2^g<<3^g<<4,m=m>>8^m&255^99,c[f]=m,d[m]=f,l=h[k=h[j=h[f]]],o=l*16843009^k*65537^j*257^f*16843008,n=h[m]*257^m*16843008;for(e=0;e<4;e++)a[e][f]=n=n<<24^n>>>8,b[e][m]=o=o<<24^o>>>8}for(e=0;e<5;e++)a[e]=a[e].slice(0),b[e]=b[e].slice(0)},_crypt:function(a,b){if(a.length!==4)throw new d.exception.invalid("invalid aes block size");var c=this._key[b],e=a[0]^c[0],f=a[b?3:1]^c[1],g=a[2]^c[2],h=a[b?1:3]^c[3],i,j,k,l=c.length/4-2,m,n=4,o=[0,0,0,0],p=this._tables[b],q=p[0],r=p[1],s=p[2],t=p[3],u=p[4];for(m=0;m<l;m++)i=q[e>>>24]^r[f>>16&255]^s[g>>8&255]^t[h&255]^c[n],j=q[f>>>24]^r[g>>16&255]^s[h>>8&255]^t[e&255]^c[n+1],k=q[g>>>24]^r[h>>16&255]^s[e>>8&255]^t[f&255]^c[n+2],h=q[h>>>24]^r[e>>16&255]^s[f>>8&255]^t[g&255]^c[n+3],n+=4,e=i,f=j,g=k;for(m=0;m<4;m++)o[b?3&-m:m]=u[e>>>24]<<24^u[f>>16&255]<<16^u[g>>8&255]<<8^u[h&255]^c[n++],i=e,e=f,f=g,g=h,h=i;return o}},d.bitArray={bitSlice:function(a,b,c){return a=d.bitArray._shiftRight(a.slice(b/32),32-(b&31)).slice(1),c===undefined?a:d.bitArray.clamp(a,c-b)},extract:function(a,b,c){var d,e=Math.floor(-b-c&31);return(b+c-1^b)&-32?d=a[b/32|0]<<32-e^a[b/32+1|0]>>>e:d=a[b/32|0]>>>e,d&(1<<c)-1},concat:function(a,b){if(a.length===0||b.length===0)return a.concat(b);var c,e,f=a[a.length-1],g=d.bitArray.getPartial(f);return g===32?a.concat(b):d.bitArray._shiftRight(b,g,f|0,a.slice(0,a.length-1))},bitLength:function(a){var b=a.length,c;return b===0?0:(c=a[b-1],(b-1)*32+d.bitArray.getPartial(c))},clamp:function(a,b){if(a.length*32<b)return a;a=a.slice(0,Math.ceil(b/32));var c=a.length;return b&=31,c>0&&b&&(a[c-1]=d.bitArray.partial(b,a[c-1]&2147483648>>b-1,1)),a},partial:function(a,b,c){return a===32?b:(c?b|0:b<<32-a)+a*1099511627776},getPartial:function(a){return Math.round(a/1099511627776)||32},equal:function(a,b){if(d.bitArray.bitLength(a)!==d.bitArray.bitLength(b))return!1;var c=0,e;for(e=0;e<a.length;e++)c|=a[e]^b[e];return c===0},_shiftRight:function(a,b,c,e){var f,g=0,h;e===undefined&&(e=[]);for(;b>=32;b-=32)e.push(c),c=0;if(b===0)return e.concat(a);for(f=0;f<a.length;f++)e.push(c|a[f]>>>b),c=a[f]<<32-b;return g=a.length?a[a.length-1]:0,h=d.bitArray.getPartial(g),e.push(d.bitArray.partial(b+h&31,b+h>32?c:e.pop(),1)),e},_xor4:function(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}},d.codec.utf8String={fromBits:function(a){var b="",c=d.bitArray.bitLength(a),e,f;for(e=0;e<c/8;e++)(e&3)===0&&(f=a[e/4]),b+=String.fromCharCode(f>>>24),f<<=8;return decodeURIComponent(escape(b))},toBits:function(a){a=unescape(encodeURIComponent(a));var b=[],c,e=0;for(c=0;c<a.length;c++)e=e<<8|a.charCodeAt(c),(c&3)===3&&(b.push(e),e=0);return c&3&&b.push(d.bitArray.partial(8*(c&3),e)),b}},d.codec.hex={fromBits:function(a){var b="",c,e;for(c=0;c<a.length;c++)b+=((a[c]|0)+0xf00000000000).toString(16).substr(4);return b.substr(0,d.bitArray.bitLength(a)/4)},toBits:function(a){var b,c=[],e;a=a.replace(/\s|0x/g,""),e=a.length,a+="00000000";for(b=0;b<a.length;b+=8)c.push(parseInt(a.substr(b,8),16)^0);return d.bitArray.clamp(c,e*4)}},d.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(a,b,c){var e="",f,g=0,h=d.codec.base64._chars,i=0,j=d.bitArray.bitLength(a);c&&(h=h.substr(0,62)+"-_");for(f=0;e.length*6<j;)e+=h.charAt((i^a[f]>>>g)>>>26),g<6?(i=a[f]<<6-g,g+=26,f++):(i<<=6,g-=6);while(e.length&3&&!b)e+="=";return e},toBits:function(a,b){a=a.replace(/\s|=/g,"");var c=[],e,f=0,g=d.codec.base64._chars,h=0,i;b&&(g=g.substr(0,62)+"-_");for(e=0;e<a.length;e++){i=g.indexOf(a.charAt(e));if(i<0)throw new d.exception.invalid("this isn't base64!");f>26?(f-=26,c.push(h^i>>>f),h=i<<32-f):(f+=6,h^=i<<32-f)}return f&56&&c.push(d.bitArray.partial(f&56,h,1)),c}},d.codec.base64url={fromBits:function(a){return d.codec.base64.fromBits(a,1,1)},toBits:function(a){return d.codec.base64.toBits(a,1)}},d.codec.bytes={fromBits:function(a){var b=[],c=d.bitArray.bitLength(a),e,f;for(e=0;e<c/8;e++)(e&3)===0&&(f=a[e/4]),b.push(f>>>24),f<<=8;return b},toBits:function(a){var b=[],c,e=0;for(c=0;c<a.length;c++)e=e<<8|a[c],(c&3)===3&&(b.push(e),e=0);return c&3&&b.push(d.bitArray.partial(8*(c&3),e)),b}},d.hash.sha256=function(a){this._key[0]||this._precompute(),a?(this._h=a._h.slice(0),this._buffer=a._buffer.slice(0),this._length=a._length):this.reset()},d.hash.sha256.hash=function(a){return(new d.hash.sha256).update(a).finalize()},d.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(a){typeof a=="string"&&(a=d.codec.utf8String.toBits(a));var b,c=this._buffer=d.bitArray.concat(this._buffer,a),e=this._length,f=this._length=e+d.bitArray.bitLength(a);for(b=512+e&-512;b<=f;b+=512)this._block(c.splice(0,16));return this},finalize:function(){var a,b=this._buffer,c=this._h;b=d.bitArray.concat(b,[d.bitArray.partial(1,1)]);for(a=b.length+2;a&15;a++)b.push(0);b.push(Math.floor(this._length/4294967296)),b.push(this._length|0);while(b.length)this._block(b.splice(0,16));return this.reset(),c},_init:[],_key:[],_precompute:function(){function d(a){return(a-Math.floor(a))*4294967296|0}var a=0,b=2,c;a:for(;a<64;b++){for(c=2;c*c<=b;c++)if(b%c===0)continue a;a<8&&(this._init[a]=d(Math.pow(b,.5))),this._key[a]=d(Math.pow(b,1/3)),a++}},_block:function(a){var b,c,d,e,f=a.slice(0),g=this._h,h=this._key,i=g[0],j=g[1],k=g[2],l=g[3],m=g[4],n=g[5],o=g[6],p=g[7];for(b=0;b<64;b++)b<16?c=f[b]:(d=f[b+1&15],e=f[b+14&15],c=f[b&15]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+f[b&15]+f[b+9&15]|0),c=c+p+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(o^m&(n^o))+h[b],p=o,o=n,n=m,m=l+c|0,l=k,k=j,j=i,i=c+(j&k^l&(j^k))+(j>>>2^j>>>13^j>>>22^j<<30^j<<19^j<<10)|0;g[0]=g[0]+i|0,g[1]=g[1]+j|0,g[2]=g[2]+k|0,g[3]=g[3]+l|0,g[4]=g[4]+m|0,g[5]=g[5]+n|0,g[6]=g[6]+o|0,g[7]=g[7]+p|0}},d.hash.sha512=function(a){this._key[0]||this._precompute(),a?(this._h=a._h.slice(0),this._buffer=a._buffer.slice(0),this._length=a._length):this.reset()},d.hash.sha512.hash=function(a){return(new d.hash.sha512).update(a).finalize()},d.hash.sha512.prototype={blockSize:1024,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(a){typeof a=="string"&&(a=d.codec.utf8String.toBits(a));var b,c=this._buffer=d.bitArray.concat(this._buffer,a),e=this._length,f=this._length=e+d.bitArray.bitLength(a);for(b=1024+e&-1024;b<=f;b+=1024)this._block(c.splice(0,32));return this},finalize:function(){var a,b=this._buffer,c=this._h;b=d.bitArray.concat(b,[d.bitArray.partial(1,1)]);for(a=b.length+4;a&31;a++)b.push(0);b.push(0),b.push(0),b.push(Math.floor(this._length/4294967296)),b.push(this._length|0);while(b.length)this._block(b.splice(0,32));return this.reset(),c},_init:[],_initr:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],_key:[],_keyr:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],_precompute:function(){function d(a){return(a-Math.floor(a))*4294967296|0}function e(a){return(a-Math.floor(a))*1099511627776&255}var a=0,b=2,c;a:for(;a<80;b++){for(c=2;c*c<=b;c++)if(b%c===0)continue a;a<8&&(this._init[a*2]=d(Math.pow(b,.5)),this._init[a*2+1]=e(Math.pow(b,.5))<<24|this._initr[a]),this._key[a*2]=d(Math.pow(b,1/3)),this._key[a*2+1]=e(Math.pow(b,1/3))<<24|this._keyr[a],a++}},_block:function(a){var b,c,d,e=a.slice(0),f=this._h,g=this._key,h=f[0],i=f[1],j=f[2],k=f[3],l=f[4],m=f[5],n=f[6],o=f[7],p=f[8],q=f[9],r=f[10],s=f[11],t=f[12],u=f[13],v=f[14],w=f[15],x=h,y=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v,M=w;for(b=0;b<80;b++){if(b<16)c=e[b*2],d=e[b*2+1];else{var N=e[(b-15)*2],O=e[(b-15)*2+1],P=(O<<31|N>>>1)^(O<<24|N>>>8)^N>>>7,Q=(N<<31|O>>>1)^(N<<24|O>>>8)^(N<<25|O>>>7),R=e[(b-2)*2],S=e[(b-2)*2+1],T=(S<<13|R>>>19)^(R<<3|S>>>29)^R>>>6,U=(R<<13|S>>>19)^(S<<3|R>>>29)^(R<<26|S>>>6),V=e[(b-7)*2],W=e[(b-7)*2+1],X=e[(b-16)*2],Y=e[(b-16)*2+1];d=Q+W,c=P+V+(d>>>0<Q>>>0?1:0),d+=U,c+=T+(d>>>0<U>>>0?1:0),d+=Y,c+=X+(d>>>0<Y>>>0?1:0)}e[b*2]=c|=0,e[b*2+1]=d|=0;var Z=F&H^~F&J,$=G&I^~G&K,_=x&z^x&B^z&B,ab=y&A^y&C^A&C,bb=(y<<4|x>>>28)^(x<<30|y>>>2)^(x<<25|y>>>7),cb=(x<<4|y>>>28)^(y<<30|x>>>2)^(y<<25|x>>>7),db=(G<<18|F>>>14)^(G<<14|F>>>18)^(F<<23|G>>>9),eb=(F<<18|G>>>14)^(F<<14|G>>>18)^(G<<23|F>>>9),fb=g[b*2],gb=g[b*2+1],hb=M+eb,ib=L+db+(hb>>>0<M>>>0?1:0);hb+=$,ib+=Z+(hb>>>0<$>>>0?1:0),hb+=gb,ib+=fb+(hb>>>0<gb>>>0?1:0),hb+=d,ib+=c+(hb>>>0<d>>>0?1:0);var jb=cb+ab,kb=bb+_+(jb>>>0<cb>>>0?1:0);L=J,M=K,J=H,K=I,H=F,I=G,G=E+hb|0,F=D+ib+(G>>>0<E>>>0?1:0)|0,D=B,E=C,B=z,C=A,z=x,A=y,y=hb+jb|0,x=ib+kb+(y>>>0<hb>>>0?1:0)|0}i=f[1]=i+y|0,f[0]=h+x+(i>>>0<y>>>0?1:0)|0,k=f[3]=k+A|0,f[2]=j+z+(k>>>0<A>>>0?1:0)|0,m=f[5]=m+C|0,f[4]=l+B+(m>>>0<C>>>0?1:0)|0,o=f[7]=o+E|0,f[6]=n+D+(o>>>0<E>>>0?1:0)|0,q=f[9]=q+G|0,f[8]=p+F+(q>>>0<G>>>0?1:0)|0,s=f[11]=s+I|0,f[10]=r+H+(s>>>0<I>>>0?1:0)|0,u=f[13]=u+K|0,f[12]=t+J+(u>>>0<K>>>0?1:0)|0,w=f[15]=w+M|0,f[14]=v+L+(w>>>0<M>>>0?1:0)|0}},d.hash.sha1=function(a){a?(this._h=a._h.slice(0),this._buffer=a._buffer.slice(0),this._length=a._length):this.reset()},d.hash.sha1.hash=function(a){return(new d.hash.sha1).update(a).finalize()},d.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(a){typeof a=="string"&&(a=d.codec.utf8String.toBits(a));var b,c=this._buffer=d.bitArray.concat(this._buffer,a),e=this._length,f=this._length=e+d.bitArray.bitLength(a);for(b=this.blockSize+e&-this.blockSize;b<=f;b+=this.blockSize)this._block(c.splice(0,16));return this},finalize:function(){var a,b=this._buffer,c=this._h;b=d.bitArray.concat(b,[d.bitArray.partial(1,1)]);for(a=b.length+2;a&15;a++)b.push(0);b.push(Math.floor(this._length/4294967296)),b.push(this._length|0);while(b.length)this._block(b.splice(0,16));return this.reset(),c},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(a,b,c,d){if(a<=19)return b&c|~b&d;if(a<=39)return b^c^d;if(a<=59)return b&c|b&d|c&d;if(a<=79)return b^c^d},_S:function(a,b){return b<<a|b>>>32-a},_block:function(a){var b,c,d,e,f,g,h,i=a.slice(0),j=this._h,k=this._key;d=j[0],e=j[1],f=j[2],g=j[3],h=j[4];for(b=0;b<=79;b++)b>=16&&(i[b]=this._S(1,i[b-3]^i[b-8]^i[b-14]^i[b-16])),c=this._S(5,d)+this._f(b,e,f,g)+h+i[b]+this._key[Math.floor(b/20)]|0,h=g,g=f,f=this._S(30,e),e=d,d=c;j[0]=j[0]+d|0,j[1]=j[1]+e|0,j[2]=j[2]+f|0,j[3]=j[3]+g|0,j[4]=j[4]+h|0}},d.mode.ccm={name:"ccm",encrypt:function(a,b,c,e,f){var g,h,i=b.slice(0),j,k=d.bitArray,l=k.bitLength(c)/8,m=k.bitLength(i)/8;f=f||64,e=e||[];if(l<7)throw new d.exception.invalid("ccm: iv must be at least 7 bytes");for(g=2;g<4&&m>>>8*g;g++);return g<15-l&&(g=15-l),c=k.clamp(c,8*(15-g)),j=d.mode.ccm._computeTag(a,b,c,e,f,g),i=d.mode.ccm._ctrMode(a,i,c,j,f,g),k.concat(i.data,i.tag)},decrypt:function(a,b,c,e,f){f=f||64,e=e||[];var g,h,i=d.bitArray,j=i.bitLength(c)/8,k=i.bitLength(b),l=i.clamp(b,k-f),m=i.bitSlice(b,k-f),n;k=(k-f)/8;if(j<7)throw new d.exception.invalid("ccm: iv must be at least 7 bytes");for(g=2;g<4&&k>>>8*g;g++);g<15-j&&(g=15-j),c=i.clamp(c,8*(15-g)),l=d.mode.ccm._ctrMode(a,l,c,m,f,g),n=d.mode.ccm._computeTag(a,l.data,c,e,f,g);if(!i.equal(l.tag,n))throw new d.exception.corrupt("ccm: tag doesn't match");return l.data},_computeTag:function(a,b,c,e,f,g){var h,i,j=0,k=24,l,m,n=[],o=d.bitArray,p=o._xor4;f/=8;if(f%2||f<4||f>16)throw new d.exception.invalid("ccm: invalid tag length");if(e.length>4294967295||b.length>4294967295)throw new d.exception.bug("ccm: can't deal with 4GiB or more data");i=[o.partial(8,(e.length?64:0)|f-2<<2|g-1)],i=o.concat(i,c),i[3]|=o.bitLength(b)/8,i=a.encrypt(i);if(e.length){l=o.bitLength(e)/8,l<=65279?n=[o.partial(16,l)]:l<=4294967295&&(n=o.concat([o.partial(16,65534)],[l])),n=o.concat(n,e);for(m=0;m<n.length;m+=4)i=a.encrypt(p(i,n.slice(m,m+4).concat([0,0,0])))}for(m=0;m<b.length;m+=4)i=a.encrypt(p(i,b.slice(m,m+4).concat([0,0,0])));return o.clamp(i,f*8)},_ctrMode:function(a,b,c,e,f,g){var h,i,j=d.bitArray,k=j._xor4,l,m,n=b.length,o=j.bitLength(b);l=j.concat([j.partial(8,g-1)],c).concat([0,0,0]).slice(0,4),e=j.bitSlice(k(e,a.encrypt(l)),0,f);if(!n)return{tag:e,data:[]};for(i=0;i<n;i+=4)l[3]++,h=a.encrypt(l),b[i]^=h[0],b[i+1]^=h[1],b[i+2]^=h[2],b[i+3]^=h[3];return{tag:e,data:j.clamp(b,o)}}},d.misc.hmac=function(a,b){this._hash=b=b||d.hash.sha256;var c=[[],[]],e,f=b.prototype.blockSize/32;this._baseHash=[new b,new b],a.length>f&&(a=b.hash(a));for(e=0;e<f;e++)c[0][e]=a[e]^909522486,c[1][e]=a[e]^1549556828;this._baseHash[0].update(c[0]),this._baseHash[1].update(c[1])},d.misc.hmac.prototype.encrypt=d.misc.hmac.prototype.mac=function(a){var b=(new this._hash(this._baseHash[0])).update(a).finalize();return(new this._hash(this._baseHash[1])).update(b).finalize()},d.misc.pbkdf2=function(a,b,c,e,f){c=c||1e3;if(e<0||c<0)throw d.exception.invalid("invalid params to pbkdf2");typeof a=="string"&&(a=d.codec.utf8String.toBits(a)),f=f||d.misc.hmac;var g=new f(a),h,i,j,k,l,m=[],n=d.bitArray;for(l=1;32*m.length<(e||1);l++){h=i=g.encrypt(n.concat(b,[l]));for(j=1;j<c;j++){i=g.encrypt(i);for(k=0;k<i.length;k++)h[k]^=i[k]}m=m.concat(h)}return e&&(m=n.clamp(m,e)),m},d.random={randomWords:function(a,b){var c=[],e,f=this.isReady(b),g;if(f===this._NOT_READY)throw new d.exception.notReady("generator isn't seeded");f&this._REQUIRES_RESEED&&this._reseedFromPools(!(f&this._READY));for(e=0;e<a;e+=4)(e+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),g=this._gen4words(),c.push(g[0],g[1],g[2],g[3]);return this._gate(),c.slice(0,a)},setDefaultParanoia:function(a){this._defaultParanoia=a},addEntropy:function(a,b,c){c=c||"user";var e,f,g,h=(new Date).valueOf(),i=this._robins[c],j=this.isReady(),k=0;e=this._collectorIds[c],e===undefined&&(e=this._collectorIds[c]=this._collectorIdNext++),i===undefined&&(i=this._robins[c]=0),this._robins[c]=(this._robins[c]+1)%this._pools.length;switch(typeof a){case"number":b===undefined&&(b=1),this._pools[i].update([e,this._eventId++,1,b,h,1,a|0]);break;case"object":var l=Object.prototype.toString.call(a);if(l==="[object Uint32Array]"){g=[];for(f=0;f<a.length;f++)g.push(a[f]);a=g}else{l!=="[object Array]"&&(k=1);for(f=0;f<a.length&&!k;f++)typeof a[f]!="number"&&(k=1)}if(!k){if(b===undefined){b=0;for(f=0;f<a.length;f++){g=a[f];while(g>0)b++,g>>>=1}}this._pools[i].update([e,this._eventId++,2,b,h,a.length].concat(a))}break;case"string":b===undefined&&(b=a.length),this._pools[i].update([e,this._eventId++,3,b,h,a.length]),this._pools[i].update(a);break;default:k=1}if(k)throw new d.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[i]+=b,this._poolStrength+=b,j===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(a){var b=this._PARANOIA_LEVELS[a!==undefined?a:this._defaultParanoia];return this._strength&&this._strength>=b?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=b?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(a){var b=this._PARANOIA_LEVELS[a?a:this._defaultParanoia];return this._strength>=b?1:this._poolStrength>b?1:this._poolStrength/b},startCollectors:function(){if(this._collectorsStarted)return;if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else{if(!document.attachEvent)throw new d.exception.bug("can't attach event");document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector)}this._collectorsStarted=!0},stopCollectors:function(){if(!this._collectorsStarted)return;window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1},addEventListener:function(a,b){this._callbacks[a][this._callbackI++]=b},removeEventListener:function(a,b){var c,d,e=this._callbacks[a],f=[];for(d in e)e.hasOwnProperty(d)&&e[d]===b&&f.push(d);for(c=0;c<f.length;c++)d=f[c],delete e[d]},_pools:[new d.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,0,0,0,0],_counter:[0,0,0,0],_cipher:undefined,_defaultParanoia:6,_collectorsStarted:!1,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3e4,_BITS_PER_RESEED:80,_gen4words:function(){for(var a=0;a<4;a++){this._counter[a]=this._counter[a]+1|0;if(this._counter[a])break}return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new d.cipher.aes(this._key)},_reseed:function(a){this._key=d.hash.sha256.hash(this._key.concat(a)),this._cipher=new d.cipher.aes(this._key);for(var b=0;b<4;b++){this._counter[b]=this._counter[b]+1|0;if(this._counter[b])break}},_reseedFromPools:function(a){var b=[],c=0,e;this._nextReseed=b[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED;for(e=0;e<16;e++)b.push(Math.random()*4294967296|0);for(e=0;e<this._pools.length;e++){b=b.concat(this._pools[e].finalize()),c+=this._poolEntropy[e],this._poolEntropy[e]=0;if(!a&&this._reseedCount&1<<e)break}this._reseedCount>=1<<this._pools.length&&(this._pools.push(new d.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=c,c>this._strength&&(this._strength=c),this._reseedCount++,this._reseed(b)},_mouseCollector:function(a){var b=a.x||a.clientX||a.offsetX||0,c=a.y||a.clientY||a.offsetY||0;d.random.addEntropy([b,c],2,"mouse")},_loadTimeCollector:function(a){d.random.addEntropy((new Date).valueOf(),2,"loadtime")},_fireEvent:function(a,b){var c,e=d.random._callbacks[a],f=[];for(c in e)e.hasOwnProperty(c)&&f.push(e[c]);for(c=0;c<f.length;c++)f[c](b)}},function(){try{var a=new Uint32Array(32);crypto.getRandomValues(a),d.random.addEntropy(a,1024,"crypto.getRandomValues")}catch(b){}}(),d.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(a,b,c,e){c=c||{},e=e||{};var f=d.json,g=f._add({iv:d.random.randomWords(4,0)},f.defaults),h,i,j;f._add(g,c),j=g.adata,typeof g.salt=="string"&&(g.salt=d.codec.base64.toBits(g.salt)),typeof g.iv=="string"&&(g.iv=d.codec.base64.toBits(g.iv));if(!d.mode[g.mode]||!d.cipher[g.cipher]||typeof a=="string"&&g.iter<=100||g.ts!==64&&g.ts!==96&&g.ts!==128||g.ks!==128&&g.ks!==192&&g.ks!==256||g.iv.length<2||g.iv.length>4)throw new d.exception.invalid("json encrypt: invalid parameters");return typeof a=="string"&&(h=d.misc.cachedPbkdf2(a,g),a=h.key.slice(0,g.ks/32),g.salt=h.salt),typeof b=="string"&&(b=d.codec.utf8String.toBits(b)),typeof j=="string"&&(j=d.codec.utf8String.toBits(j)),i=new d.cipher[g.cipher](a),f._add(e,g),e.key=a,g.ct=d.mode[g.mode].encrypt(i,b,g.iv,j,g.ts),f.encode(g)},decrypt:function(a,b,c,e){c=c||{},e=e||{};var f=d.json,g=f._add(f._add(f._add({},f.defaults),f.decode(b)),c,!0),h,i,j,k=g.adata;typeof g.salt=="string"&&(g.salt=d.codec.base64.toBits(g.salt)),typeof g.iv=="string"&&(g.iv=d.codec.base64.toBits(g.iv));if(!d.mode[g.mode]||!d.cipher[g.cipher]||typeof a=="string"&&g.iter<=100||g.ts!==64&&g.ts!==96&&g.ts!==128||g.ks!==128&&g.ks!==192&&g.ks!==256||!g.iv||g.iv.length<2||g.iv.length>4)throw new d.exception.invalid("json decrypt: invalid parameters");return typeof a=="string"&&(i=d.misc.cachedPbkdf2(a,g),a=i.key.slice(0,g.ks/32),g.salt=i.salt),typeof k=="string"&&(k=d.codec.utf8String.toBits(k)),j=new d.cipher[g.cipher](a),h=d.mode[g.mode].decrypt(j,g.ct,g.iv,k,g.ts),f._add(e,g),e.key=a,d.codec.utf8String.fromBits(h)},encode:function(a){var b,c="{",e="";for(b in a)if(a.hasOwnProperty(b)){if(!b.match(/^[a-z0-9]+$/i))throw new d.exception.invalid("json encode: invalid property name");c+=e+'"'+b+'"'+":",e=",";switch(typeof a[b]){case"number":case"boolean":c+=a[b];break;case"string":c+='"'+escape(a[b])+'"';break;case"object":c+='"'+d.codec.base64.fromBits(a[b],0)+'"';break;default:throw new d.exception.bug("json encode: unsupported type")}}return c+"}"},decode:function(a){a=a.replace(/\s/g,"");if(!a.match(/^\{.*\}$/))throw new d.exception.invalid("json decode: this isn't json!");var b=a.replace(/^\{|\}$/g,"").split(/,/),c={},e,f;for(e=0;e<b.length;e++){if(!(f=b[e].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i)))throw new d.exception.invalid("json decode: this isn't json!");f[3]?c[f[2]]=parseInt(f[3],10):c[f[2]]=f[2].match(/^(ct|salt|iv)$/)?d.codec.base64.toBits(f[4]):unescape(f[4])}return c},_add:function(a,b,c){a===undefined&&(a={});if(b===undefined)return a;var e;for(e in b)if(b.hasOwnProperty(e)){if(c&&a[e]!==undefined&&a[e]!==b[e])throw new d.exception.invalid("required parameter overridden");a[e]=b[e]}return a},_subtract:function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&a[d]!==b[d]&&(c[d]=a[d]);return c},_filter:function(a,b){var c={},d;for(d=0;d<b.length;d++)a[b[d]]!==undefined&&(c[b[d]]=a[b[d]]);return c}},d.encrypt=d.json.encrypt,d.decrypt=d.json.decrypt,d.misc._pbkdf2Cache={},d.misc.cachedPbkdf2=function(a,b){var c=d.misc._pbkdf2Cache,e,f,g,h,i;return b=b||{},i=b.iter||1e3,f=c[a]=c[a]||{},e=f[i]=f[i]||{firstSalt:b.salt&&b.salt.length?b.salt.slice(0):d.random.randomWords(2,0)},h=b.salt===undefined?e.firstSalt:b.salt,e[h]=e[h]||d.misc.pbkdf2(a,h,b.iter),{key:e[h].slice(0),salt:h.slice(0)}},d.bn=function(a){this.initWith(a)},d.bn.prototype={radix:24,maxMul:8,_class:d.bn,copy:function(){return new this._class(this)},initWith:function(a){var b=0,c,d,e;switch(typeof a){case"object":this.limbs=a.limbs.slice(0);break;case"number":this.limbs=[a],this.normalize();break;case"string":a=a.replace(/^0x/,""),this.limbs=[],c=this.radix/4;for(b=0;b<a.length;b+=c)this.limbs.push(parseInt(a.substring(Math.max(a.length-b-c,0),a.length-b),16));break;default:this.limbs=[0]}return this},equals:function(a){typeof a=="number"&&(a=new this._class(a));var b=0,c;this.fullReduce(),a.fullReduce();for(c=0;c<this.limbs.length||c<a.limbs.length;c++)b|=this.getLimb(c)^a.getLimb(c);return b===0},getLimb:function(a){return a>=this.limbs.length?0:this.limbs[a]},greaterEquals:function(a){typeof a=="number"&&(a=new this._class(a));var b=0,c=0,d,e,f;d=Math.max(this.limbs.length,a.limbs.length)-1;for(;d>=0;d--)e=this.getLimb(d),f=a.getLimb(d),c|=f-e&~b,b|=e-f&~c;return(c|~b)>>>31},toString:function(){this.fullReduce();var a="",b,c,d=this.limbs;for(b=0;b<this.limbs.length;b++){c=d[b].toString(16);while(b<this.limbs.length-1&&c.length<6)c="0"+c;a=c+a}return"0x"+a},addM:function(a){typeof a!="object"&&(a=new this._class(a));var b,c=this.limbs,d=a.limbs;for(b=c.length;b<d.length;b++)c[b]=0;for(b=0;b<d.length;b++)c[b]+=d[b];return this},doubleM:function(){var a,b=0,c,d=this.radix,e=this.radixMask,f=this.limbs;for(a=0;a<f.length;a++)c=f[a],c=c+c+b,f[a]=c&e,b=c>>d;return b&&f.push(b),this},halveM:function(){var a,b=0,c,d=this.radix,e=this.limbs;for(a=e.length-1;a>=0;a--)c=e[a],e[a]=c+b>>1,b=(c&1)<<d;return e[e.length-1]||e.pop(),this},subM:function(a){typeof a!="object"&&(a=new this._class(a));var b,c=this.limbs,d=a.limbs;for(b=c.length;b<d.length;b++)c[b]=0;for(b=0;b<d.length;b++)c[b]-=d[b];return this},mod:function(a){a=(new d.bn(a)).normalize();var b=(new d.bn(this)).normalize(),c=0;for(;b.greaterEquals(a);c++)a.doubleM();for(;c>0;c--)a.halveM(),b.greaterEquals(a)&&b.subM(a).normalize();return b.trim()},inverseMod:function(a){var b=new d.bn(1),c=new d.bn(0),e=new d.bn(this),f=new d.bn(a),g,h,i=1;if(!(a.limbs[0]&1))throw new d.exception.invalid("inverseMod: p must be odd");do{e.limbs[0]&1&&(e.greaterEquals(f)||(g=e,e=f,f=g,g=b,b=c,c=g),e.subM(f),e.normalize(),b.greaterEquals(c)||b.addM(a),b.subM(c)),e.halveM(),b.limbs[0]&1&&b.addM(a),b.normalize(),b.halveM();for(h=i=0;h<e.limbs.length;h++)i|=e.limbs[h]}while(i);if(!f.equals(1))throw new d.exception.invalid("inverseMod: p and x must be relatively prime");return c},add:function(a){return this.copy().addM(a)},sub:function(a){return this.copy().subM(a)},mul:function(a){typeof a=="number"&&(a=new this._class(a));var b,c,d=this.limbs,e=a.limbs,f=d.length,g=e.length,h=new this._class,i=h.limbs,j,k=this.maxMul;for(b=0;b<this.limbs.length+a.limbs.length+1;b++)i[b]=0;for(b=0;b<f;b++){j=d[b];for(c=0;c<g;c++)i[b+c]+=j*e[c];--k||(k=this.maxMul,h.cnormalize())}return h.cnormalize().reduce()},square:function(){return this.mul(this)},power:function(a){typeof a=="number"?a=[a]:a.limbs!==undefined&&(a=a.normalize().limbs);var b,c,d=new this._class(1),e=this;for(b=0;b<a.length;b++)for(c=0;c<this.radix;c++)a[b]&1<<c&&(d=d.mul(e)),e=e.square();return d},mulmod:function(a,b){return this.mod(b).mul(a.mod(b)).mod(b)},powermod:function(a,b){var c=new d.bn(1),e=new d.bn(this),f=new d.bn(a);for(;;){f.limbs[0]&1&&(c=c.mulmod(e,b)),f.halveM();if(f.equals(0))break;e=e.mulmod(e,b)}return c.normalize().reduce()},trim:function(){var a=this.limbs,b;do b=a.pop();while(a.length&&b===0);return a.push(b),this},reduce:function(){return this},fullReduce:function(){return this.normalize()},normalize:function(){var a=0,b,c=this.placeVal,d=this.ipv,e,f,g=this.limbs,h=g.length,i=this.radixMask;for(b=0;b<h||a!==0&&a!==-1;b++)e=(g[b]||0)+a,f=g[b]=e&i,a=(e-f)*d;return a===-1&&(g[b-1]-=this.placeVal),this},cnormalize:function(){var a=0,b,c=this.ipv,d,e,f=this.limbs,g=f.length,h=this.radixMask;for(b=0;b<g-1;b++)d=f[b]+a,e=f[b]=d&h,a=(d-e)*c;return f[b]+=a,this},toBits:function(a){this.fullReduce(),a=a||this.exponent||this.limbs.length*this.radix;var b=Math.floor((a-1)/24),c=d.bitArray,e=(a+7&-8)%this.radix||this.radix,f=[c.partial(e,this.getLimb(b))];for(b--;b>=0;b--)f=c.concat(f,[c.partial(this.radix,this.getLimb(b))]);return f},bitLength:function(){this.fullReduce();var a=this.radix*(this.limbs.length-1),b=this.limbs[this.limbs.length-1];for(;b;b>>=1)a++;return a+7&-8}},d.bn.fromBits=function(a){var b=this,c=new b,e=[],f=d.bitArray,g=this.prototype,h=Math.min(this.bitLength||4294967296,f.bitLength(a)),i=h%g.radix||g.radix;e[0]=f.extract(a,0,i);for(;i<h;i+=g.radix)e.unshift(f.extract(a,i,g.radix));return c.limbs=e,c},d.bn.prototype.ipv=1/(d.bn.prototype.placeVal=Math.pow(2,d.bn.prototype.radix)),d.bn.prototype.radixMask=(1<<d.bn.prototype.radix)-1,d.bn.pseudoMersennePrime=function(a,b){function c(a){this.initWith(a)}var e=c.prototype=new d.bn,f,g,h;h=e.modOffset=Math.ceil(g=a/e.radix),e.exponent=a,e.offset=[],e.factor=[],e.minOffset=h,e.fullMask=0,e.fullOffset=[],e.fullFactor=[],e.modulus=c.modulus=new d.bn(Math.pow(2,a)),e.fullMask=0|-Math.pow(2,a%e.radix);for(f=0;f<b.length;f++)e.offset[f]=Math.floor(b[f][0]/e.radix-g),e.fullOffset[f]=Math.ceil(b[f][0]/e.radix-g),e.factor[f]=b[f][1]*Math.pow(.5,a-b[f][0]+e.offset[f]*e.radix),e.fullFactor[f]=b[f][1]*Math.pow(.5,a-b[f][0]+e.fullOffset[f]*e.radix),e.modulus.addM(new d.bn(Math.pow(2,b[f][0])*b[f][1])),e.minOffset=Math.min(e.minOffset,-e.offset[f]);return e._class=c,e.modulus.cnormalize(),e.reduce=function(){var a,b,c,d=this.modOffset,e=this.limbs,f,g=this.offset,h=this.offset.length,i=this.factor,j;a=this.minOffset;while(e.length>d){c=e.pop(),j=e.length;for(b=0;b<h;b++)e[j+g[b]]-=i[b]*c;a--,a||(e.push(0),this.cnormalize(),a=this.minOffset)}return this.cnormalize(),this},e._strongReduce=e.fullMask===-1?e.reduce:function(){var a=this.limbs,b=a.length-1,c,d;this.reduce();if(b===this.modOffset-1){d=a[b]&this.fullMask,a[b]-=d;for(c=0;c<this.fullOffset.length;c++)a[b+this.fullOffset[c]]-=this.fullFactor[c]*d;this.normalize()}},e.fullReduce=function(){var a,b;this._strongReduce(),this.addM(this.modulus),this.addM(this.modulus),this.normalize(),this._strongReduce();for(b=this.limbs.length;b<this.modOffset;b++)this.limbs[b]=0;a=this.greaterEquals(this.modulus);for(b=0;b<this.limbs.length;b++)this.limbs[b]-=this.modulus.limbs[b]*a;return this.cnormalize(),this},e.inverse=function(){return this.power(this.modulus.sub(2))},c.fromBits=d.bn.fromBits,c},d.bn.prime={p127:d.bn.pseudoMersennePrime(127,[[0,-1]]),p25519:d.bn.pseudoMersennePrime(255,[[0,-19]]),p192:d.bn.pseudoMersennePrime(192,[[0,-1],[64,-1]]),p224:d.bn.pseudoMersennePrime(224,[[0,1],[96,-1]]),p256:d.bn.pseudoMersennePrime(256,[[0,-1],[96,1],[192,1],[224,-1]]),p384:d.bn.pseudoMersennePrime(384,[[0,-1],[32,1],[96,-1],[128,-1]]),p521:d.bn.pseudoMersennePrime(521,[[0,-1]])},d.bn.random=function(a,b){typeof a!="object"&&(a=new d.bn(a));var c,e,f=a.limbs.length,g=a.limbs[f-1]+1,h=new d.bn;for(;;){do c=d.random.randomWords(f,b),c[f-1]<0&&(c[f-1]+=4294967296);while(Math.floor(c[f-1]/g)===Math.floor(4294967296/g));c[f-1]%=g;for(e=0;e<f-1;e++)c[e]&=a.radixMask;h.limbs=c;if(!h.greaterEquals(a))return h}},d.ecc={},d.ecc.point=function(a,b,c){b===undefined?this.isIdentity=!0:(this.x=b,this.y=c,this.isIdentity=!1),this.curve=a},d.ecc.point.prototype={toJac:function(){return new d.ecc.pointJac(this.curve,this.x,this.y,new this.curve.field(1))},mult:function(a){return this.toJac().mult(a,this).toAffine()},mult2:function(a,b,c){return this.toJac().mult2(a,this,b,c).toAffine()},multiples:function(){var a,b,c;if(this._multiples===undefined){c=this.toJac().doubl(),a=this._multiples=[new d.ecc.point(this.curve),this,c.toAffine()];for(b=3;b<16;b++)c=c.add(this),a.push(c.toAffine())}return this._multiples},isValid:function(){return this.y.square().equals(this.curve.b.add(this.x.mul(this.curve.a.add(this.x.square()))))},toBits:function(){return d.bitArray.concat(this.x.toBits(),this.y.toBits())}},d.ecc.pointJac=function(a,b,c,d){b===undefined?this.isIdentity=!0:(this.x=b,this.y=c,this.z=d,this.isIdentity=!1),this.curve=a},d.ecc.pointJac.prototype={add:function(a){var b=this,c,e,f,g,h,i,j,k,l,m,n;if(b.curve!==a.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";return b.isIdentity?a.toJac():a.isIdentity?b:(c=b.z.square(),e=a.x.mul(c).subM(b.x),e.equals(0)?b.y.equals(a.y.mul(c.mul(b.z)))?b.doubl():new d.ecc.pointJac(b.curve):(f=a.y.mul(c.mul(b.z)).subM(b.y),g=e.square(),h=f.square(),i=e.square().mul(e).addM(b.x.add(b.x).mul(g)),j=h.subM(i),k=b.x.mul(g).subM(j).mul(f),l=b.y.mul(e.square().mul(e)),m=k.subM(l),n=b.z.mul(e),new d.ecc.pointJac(this.curve,j,m,n)))},doubl:function(){if(this.isIdentity)return this;var a=this.y.square(),b=a.mul(this.x.mul(4)),c=a.square().mul(8),e=this.z.square(),f=this.x.sub(e).mul(3).mul(this.x.add(e)),g=f.square().subM(b).subM(b),h=b.sub(g).mul(f).subM(c),i=this.y.add(this.y).mul(this.z);return new d.ecc.pointJac(this.curve,g,h,i)},toAffine:function(){if(this.isIdentity||this.z.equals(0))return new d.ecc.point(this.curve);var a=this.z.inverse(),b=a.square();return new d.ecc.point(this.curve,this.x.mul(b).fullReduce(),this.y.mul(b.mul(a)).fullReduce())},mult:function(a,b){typeof a=="number"?a=[a]:a.limbs!==undefined&&(a=a.normalize().limbs);var c,e,f=(new d.ecc.point(this.curve)).toJac(),g=b.multiples();for(c=a.length-1;c>=0;c--)for(e=d.bn.prototype.radix-4;e>=0;e-=4)f=f.doubl().doubl().doubl().doubl().add(g[a[c]>>e&15]);return f},mult2:function(a,b,c,e){typeof a=="number"?a=[a]:a.limbs!==undefined&&(a=a.normalize().limbs),typeof c=="number"?c=[c]:c.limbs!==undefined&&(c=c.normalize().limbs);var f,g,h=(new d.ecc.point(this.curve)).toJac(),i=b.multiples(),j=e.multiples(),k,l;for(f=Math.max(a.length,c.length)-1;f>=0;f--){k=a[f]|0,l=c[f]|0;for(g=d.bn.prototype.radix-4;g>=0;g-=4)h=h.doubl().doubl().doubl().doubl().add(i[k>>g&15]).add(j[l>>g&15])}return h},isValid:function(){var a=this.z.square(),b=a.square(),c=b.mul(a);return this.y.square().equals(this.curve.b.mul(c).add(this.x.mul(this.curve.a.mul(b).add(this.x.square()))))}},d.ecc.curve=function(a,b,c,e,f,g){this.field=a,this.r=a.prototype.modulus.sub(b),this.a=new a(c),this.b=new a(e),this.G=new d.ecc.point(this,new a(f),new a(g))},d.ecc.curve.prototype.fromBits=function(a){var b=d.bitArray,c=this.field.prototype.exponent+7&-8,e=new d.ecc.point(this,this.field.fromBits(b.bitSlice(a,0,c)),this.field.fromBits(b.bitSlice(a,c,2*c)));if(!e.isValid())throw new d.exception.corrupt("not on the curve!");return e},d.ecc.curves={c192:new d.ecc.curve(d.bn.prime.p192,"0x662107c8eb94364e4b2dd7ce",-3,"0x64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","0x188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","0x07192b95ffc8da78631011ed6b24cdd573f977a11e794811"),c224:new d.ecc.curve(d.bn.prime.p224,"0xe95c1f470fc1ec22d6baa3a3d5c4",-3,"0xb4050a850c04b3abf54132565044b0b7d7bfd8ba270b39432355ffb4","0xb70e0cbd6bb4bf7f321390b94a03c1d356c21122343280d6115c1d21","0xbd376388b5f723fb4c22dfe6cd4375a05a07476444d5819985007e34"),c256:new d.ecc.curve(d.bn.prime.p256,"0x4319055358e8617b0c46353d039cdaae",-3,"0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),c384:new d.ecc.curve(d.bn.prime.p384,"0x389cb27e0bc8d21fa7e5f24cb74f58851313e696333ad68c",-3,"0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef","0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7","0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},d.ecc._dh=function(a){d.ecc[a]={publicKey:function(a,b){this._curve=a,b instanceof Array?this._point=a.fromBits(b):this._point=b},secretKey:function(a,b){this._curve=a,this._exponent=b},generateKeys:function(b,c){b===undefined&&(b=256);if(typeof b=="number"){b=d.ecc.curves["c"+b];if(b===undefined)throw new d.exception.invalid("no such curve")}var e=d.bn.random(b.r,c),f=b.G.mult(e);return{pub:new d.ecc[a].publicKey(b,f),sec:new d.ecc[a].secretKey(b,e)}}}},d.ecc._dh("elGamal"),d.ecc.elGamal.publicKey.prototype={kem:function(a){var b=d.bn.random(this._curve.r,a),c=this._curve.G.mult(b).toBits(),e=d.hash.sha256.hash(this._point.mult(b).toBits());return{key:e,tag:c}}},d.ecc.elGamal.secretKey.prototype={unkem:function(a){return d.hash.sha256.hash(this._curve.fromBits(a).mult(this._exponent).toBits())},dh:function(a){return d.hash.sha256.hash(a._point.mult(this._exponent).toBits())}},d.ecc._dh("ecdsa"),d.ecc.ecdsa.secretKey.prototype={sign:function(a,b){var c=this._curve.r,e=c.bitLength(),f=d.bn.random(c.sub(1),b).add(1),g=this._curve.G.mult(f).x.mod(c),h=d.bn.fromBits(a).add(g.mul(this._exponent)).inverseMod(c).mul(f).mod(c);return d.bitArray.concat(g.toBits(e),h.toBits(e))}},d.ecc.ecdsa.publicKey.prototype={verify:function(a,b){var c=d.bitArray,e=this._curve.r,f=e.bitLength(),g=d.bn.fromBits(c.bitSlice(b,0,f)),h=d.bn.fromBits(c.bitSlice(b,f,2*f)),i=d.bn.fromBits(a).mul(h).mod(e),j=g.mul(h).mod(e),k=this._curve.G.mult2(i,j,this._point).x;if(g.equals(0)||h.equals(0)||g.greaterEquals(e)||h.greaterEquals(e)||!k.equals(g))throw new d.exception.corrupt("signature didn't check out");return!0}},d.keyexchange.srp={makeVerifier:function(a,b,c,e){var f;return f=this.makeX(a,b,c),f=d.bn.fromBits(f),e.g.powermod(f,e.N)},makeX:function(a,b,c){var e=d.hash.sha1.hash(a+":"+b);return d.hash.sha1.hash(d.bitArray.concat(c,e))},knownGroup:function(a){return typeof a!="string"&&(a=a.toString()),this._didInitKnownGroups||this._initKnownGroups(),this._knownGroups[a]},_didInitKnownGroups:!1,_initKnownGroups:function(){var a,b,c;for(a=0;a<this._knownGroupSizes.length;a++)b=this._knownGroupSizes[a].toString(),c=this._knownGroups[b],c.N=new d.bn(c.N),c.g=new d.bn(c.g);this._didInitKnownGroups=!0},_knownGroupSizes:[1024,1536,2048],_knownGroups:{1024:{N:"EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",g:2},1536:{N:"9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA9614B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F84380B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0BE3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF56EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734AF7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB",g:2},2048:{N:"AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC3192943DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310DCD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FBD5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF747359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E7303CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB694B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F9E4AFF73",g:2}}},d.ecc.curves.c256=new d.ecc.curve(d.bn.pseudoMersennePrime(256,[[0,-1],[4,-1],[6,-1],[7,-1],[8,-1],[9,-1],[32,-1]]),"0x14551231950b75fc4402da1722fc9baee",0,7,"0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),d.ecc.pointJac.prototype.add=function(a){var b=this;if(b.curve!==a.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";if(b.isIdentity)return a.toJac();if(a.isIdentity)return b;var c=b.z.square(),e=a.x.mul(c).subM(b.x),f=a.y.mul(b.z).mul(c);if(e.equals(0))return b.y.equals(a.y.mul(c.mul(b.z)))?b.doubl():new d.ecc.pointJac(b.curve);var g=e.square(),h=g.copy().doubleM().doubleM(),i=e.mul(h),j=f.sub(b.y).doubleM(),k=b.x.mul(h),l=j.square().subM(i).subM(k.copy().doubleM()),m=j.mul(k.sub(l)).subM(b.y.mul(i).doubleM()),n=b.z.add(e).square().subM(c).subM(g);return new d.ecc.pointJac(this.curve,l,m,n)},d.ecc.pointJac.prototype.doubl=function(){if(this.isIdentity)return this;var a=this.x.square(),b=this.y.square(),c=b.square(),e=this.x.add(b).square().subM(a).subM(c).doubleM(),f=a.mul(3),g=f.square(),h=g.sub(e.copy().doubleM()),i=f.mul(e.sub(h)).subM(c.doubleM().doubleM().doubleM()),j=this.y.mul(this.z).doubleM();return new d.ecc.pointJac(this.curve,h,i,j)},d.ecc.point.prototype.toBytesCompressed=function(){var a=this.y.mod(2).toString()=="0x0"?2:3;return[a].concat(d.codec.bytes.fromBits(this.x.toBits()))},function(){function k(a,b,c){return a^b^c}function l(a,b,c){return a&b|~a&c}function m(a,b,c){return(a|~b)^c}function n(a,b,c){return a&c|b&~c}function o(a,b,c){return a^(b|~c)}function p(a,b){return a<<b|a>>>32-b}function q(a){return(a&255)<<24|(a&65280)<<8|(a&255<<16)>>>8|(a&255<<24)>>>24}function r(a){var d=this._h[0],e=this._h[1],f=this._h[2],q=this._h[3],r=this._h[4],s=this._h[0],t=this._h[1],u=this._h[2],v=this._h[3],w=this._h[4],x=0,y;for(;x<16;++x)y=p(d+k(e,f,q)+a[g[x]]+b[x],i[x])+r,d=r,r=q,q=p(f,10),f=e,e=y,y=p(s+o(t,u,v)+a[h[x]]+c[x],j[x])+w,s=w,w=v,v=p(u,10),u=t,t=y;for(;x<32;++x)y=p(d+l(e,f,q)+a[g[x]]+b[x],i[x])+r,d=r,r=q,q=p(f,10),f=e,e=y,y=p(s+n(t,u,v)+a[h[x]]+c[x],j[x])+w,s=w,w=v,v=p(u,10),u=t,t=y;for(;x<48;++x)y=p(d+m(e,f,q)+a[g[x]]+b[x],i[x])+r,d=r,r=q,q=p(f,10),f=e,e=y,y=p(s+m(t,u,v)+a[h[x]]+c[x],j[x])+w,s=w,w=v,v=p(u,10),u=t,t=y;for(;x<64;++x)y=p(d+n(e,f,q)+a[g[x]]+b[x],i[x])+r,d=r,r=q,q=p(f,10),f=e,e=y,y=p(s+l(t,u,v)+a[h[x]]+c[x],j[x])+w,s=w,w=v,v=p(u,10),u=t,t=y;for(;x<80;++x)y=p(d+o(e,f,q)+a[g[x]]+b[x],i[x])+r,d=r,r=q,q=p(f,10),f=e,e=y,y=p(s+k(t,u,v)+a[h[x]]+c[x],j[x])+w,s=w,w=v,v=p(u,10),u=t,t=y;y=this._h[1]+f+v,this._h[1]=this._h[2]+q+w,this._h[2]=this._h[3]+r+s,this._h[3]=this._h[4]+d+t,this._h[4]=this._h[0]+e+u,this._h[0]=y}d.hash.ripemd160=function(a){a?(this._h=a._h.slice(0),this._buffer=a._buffer.slice(0),this._length=a._length):this.reset()},d.hash.ripemd160.hash=function(a){return(new d.hash.ripemd160).update(a).finalize()},d.hash.ripemd160.prototype={reset:function(){return this._h=a.slice(0),this._buffer=[],this._length=0,this},update:function(a){typeof a=="string"&&(a=d.codec.utf8String.toBits(a));var b,c=this._buffer=d.bitArray.concat(this._buffer,a),e=this._length,f=this._length=e+d.bitArray.bitLength(a);for(b=512+e&-512;b<=f;b+=512){var g=c.splice(0,16);for(var h=0;h<16;++h)g[h]=q(g[h]);r.call(this,g)}return this},finalize:function(){var a=d.bitArray.concat(this._buffer,[d.bitArray.partial(1,1)]),b=(this._length+1)%512,c=(b>448?512:448)-b%448,e=c%32;e>0&&(a=d.bitArray.concat(a,[d.bitArray.partial(e,0)]));for(;c>=32;c-=32)a.push(0);a.push(q(this._length|0)),a.push(q(Math.floor(this._length/4294967296)));while(a.length){var f=a.splice(0,16);for(var g=0;g<16;++g)f[g]=q(f[g]);r.call(this,f)}var h=this._h;this.reset();for(var g=0;g<5;++g)h[g]=q(h[g]);return h}};var a=[1732584193,4023233417,2562383102,271733878,3285377520],b=[0,1518500249,1859775393,2400959708,2840853838],c=[1352829926,1548603684,1836072691,2053994217,0];for(var e=4;e>=0;--e)for(var f=1;f<16;++f)b.splice(e,0,b[e]),c.splice(e,0,c[e]);var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],i=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],j=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}(),d.bn.ZERO=new d.bn(0),d.bn.prototype.divRem=function(a){typeof a!="object"&&(a=new this._class(a));var b=this.abs(),c=a.abs(),d=new this._class(0),e=0;if(!b.greaterEquals(c))return this.initWith(0),this;if(b.equals(c))return this.initWith(1),this;for(;b.greaterEquals(c);e++)c.doubleM();for(;e>0;e--)d.doubleM(),c.halveM(),b.greaterEquals(c)&&(d.addM(1),b.subM(a).normalize());return[d,b]},d.bn.prototype.divRound=function(a){var b=this.divRem(a),c=b[0],d=b[1];return d.doubleM().greaterEquals(a)&&c.addM(1),c},d.bn.prototype.div=function(a){var b=this.divRem(a);return b[0]},d.bn.prototype.sign=function(){return this.greaterEquals(d.bn.ZERO)?1:-1},d.bn.prototype.neg=function(){return d.bn.ZERO.sub(this)},d.bn.prototype.abs=function(){return this.sign()===-1?this.neg():this},d.ecc.ecdsa.secretKey.prototype={sign:function(a,b){var c=this._curve.r,e=c.bitLength(),f=d.bn.random(c.sub(1),b).add(1),g=this._curve.G.mult(f).x.mod(c),h=d.bn.fromBits(a).add(g.mul(this._exponent)).mul(f.inverseMod(c)).mod(c);return d.bitArray.concat(g.toBits(e),h.toBits(e))}},d.ecc.ecdsa.publicKey.prototype={verify:function(a,b){var c=d.bitArray,e=this._curve.r,f=e.bitLength(),g=d.bn.fromBits(c.bitSlice(b,0,f)),h=d.bn.fromBits(c.bitSlice(b,f,2*f)),i=h.modInverse(e),j=d.bn.fromBits(a).mul(i).mod(e),k=g.mul(i).mod(e),l=this._curve.G.mult2(j,k,this._point).x;if(g.equals(0)||h.equals(0)||g.greaterEquals(e)||h.greaterEquals(e)||!l.equals(g))throw new d.exception.corrupt("signature didn't check out");return!0}},d.ecc.ecdsa.secretKey.prototype.signDER=function(a,b){return this.encodeDER(this.sign(a,b))},d.ecc.ecdsa.secretKey.prototype.encodeDER=function(a){var b=d.bitArray,c=this._curve.r,e=c.bitLength(),f=d.codec.bytes.fromBits(b.bitSlice(a,0,e)),g=d.codec.bytes.fromBits(b.bitSlice(a,e,2*e));while(!f[0]&&f.length)f.shift();while(!g[0]&&g.length)g.shift();f[0]&128&&f.unshift(0),g[0]&128&&g.unshift(0);var h=[].concat(48,4+f.length+g.length,2,f.length,f,2,g.length,g);return d.codec.bytes.toBits(h)}},4:function(a,b,c){function e(a){if(!a||toString.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return!1;var b=hasOwnProperty.call(a,"constructor"),c=hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!c)return!1;var e;for(e in a);return e===undefined||d.call(a,e)}var d=Object.prototype.hasOwnProperty;a.exports=function f(){var a,b,c,d,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&typeof i!="function"&&(i={});for(;j<k;j++)if((a=arguments[j])!=null)for(b in a){c=i[b],d=a[b];if(i===d)continue;l&&d&&(e(d)||(g=Array.isArray(d)))?(g?(g=!1,h=c&&Array.isArray(c)?c:[]):h=c&&e(c)?c:{},i[b]=f(l,h,d)):d!==undefined&&(i[b]=d)}return i}},5:function(a,b,c){(function(b){var d=a.exports=c(24);d.logObject=function(a,c){/MSIE/.test(navigator.userAgent)?b.log(a,JSON.stringify(c)):b.log(a,"",c)}})(c(1))},6:function(a,b,c){var d=c(4),e=a.exports={load:function(a){return d(e,a),e}}},7:function(a,b,c){function i(a,b,c,d,e,f){while(--f>=0){var g=b*this[a++]+c[d]+e;e=Math.floor(g/67108864),c[d++]=g&67108863}return e}function j(a,b,c,d,e,f){var g=b&32767,h=b>>15;while(--f>=0){var i=this[a]&32767,j=this[a++]>>15,k=h*i+j*g;i=g*i+((k&32767)<<15)+c[d]+(e&1073741823),e=(i>>>30)+(k>>>15)+h*j+(e>>>30),c[d++]=i&1073741823}return e}function k(a,b,c,d,e,f){var g=b&16383,h=b>>14;while(--f>=0){var i=this[a]&16383,j=this[a++]>>14,k=h*i+j*g;i=g*i+((k&16383)<<14)+c[d]+e,e=(i>>28)+(k>>14)+h*j,c[d++]=i&268435455}return e}function q(a){return m.charAt(a)}function r(a,b){var c=n[a.charCodeAt(b)];return c==null?-1:c}function s(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s}function t(a){this.t=1,this.s=a<0?-1:0,a>0?this[0]=a:a<-1?this[0]=a+DV:this.t=0}function u(a){var b=h();return b.fromInt(a),b}function v(a,b){var c;if(b==16)c=4;else if(b==8)c=3;else if(b==256)c=8;else if(b==2)c=1;else if(b==32)c=5;else{if(b!=4){this.fromRadix(a,b);return}c=2}this.t=0,this.s=0;var d=a.length,e=!1,f=0;while(--d>=0){var h=c==8?a[d]&255:r(a,d);if(h<0){a.charAt(d)=="-"&&(e=!0);continue}e=!1,f==0?this[this.t++]=h:f+c>this.DB?(this[this.t-1]|=(h&(1<<this.DB-f)-1)<<f,this[this.t++]=h>>this.DB-f):this[this.t-1]|=h<<f,f+=c,f>=this.DB&&(f-=this.DB)}c==8&&(a[0]&128)!=0&&(this.s=-1,f>0&&(this[this.t-1]|=(1<<this.DB-f)-1<<f)),this.clamp(),e&&g.ZERO.subTo(this,this)}function w(){var a=this.s&this.DM;while(this.t>0&&this[this.t-1]==a)--this.t}function x(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(a==16)b=4;else if(a==8)b=3;else if(a==2)b=1;else if(a==32)b=5;else{if(a!=4)return this.toRadix(a);b=2}var c=(1<<b)-1,d,e=!1,f="",g=this.t,h=this.DB-g*this.DB%b;if(g-->0){h<this.DB&&(d=this[g]>>h)>0&&(e=!0,f=q(d));while(g>=0)h<b?(d=(this[g]&(1<<h)-1)<<b-h,d|=this[--g]>>(h+=this.DB-b)):(d=this[g]>>(h-=b)&c,h<=0&&(h+=this.DB,--g)),d>0&&(e=!0),e&&(f+=q(d))}return e?f:"0"}function y(){var a=h();return g.ZERO.subTo(this,a),a}function z(){return this.s<0?this.negate():this}function A(a){var b=this.s-a.s;if(b!=0)return b;var c=this.t;b=c-a.t;if(b!=0)return this.s<0?-b:b;while(--c>=0)if((b=this[c]-a[c])!=0)return b;return 0}function B(a){var b=1,c;return(c=a>>>16)!=0&&(a=c,b+=16),(c=a>>8)!=0&&(a=c,b+=8),(c=a>>4)!=0&&(a=c,b+=4),(c=a>>2)!=0&&(a=c,b+=2),(c=a>>1)!=0&&(a=c,b+=1),b}function C(){return this.t<=0?0:this.DB*(this.t-1)+B(this[this.t-1]^this.s&this.DM)}function D(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s}function E(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s}function F(a,b){var c=a%this.DB,d=this.DB-c,e=(1<<d)-1,f=Math.floor(a/this.DB),g=this.s<<c&this.DM,h;for(h=this.t-1;h>=0;--h)b[h+f+1]=this[h]>>d|g,g=(this[h]&e)<<c;for(h=f-1;h>=0;--h)b[h]=0;b[f]=g,b.t=this.t+f+1,b.s=this.s,b.clamp()}function G(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t){b.t=0;return}var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}function H(a,b){var c=0,d=0,e=Math.min(a.t,this.t);while(c<e)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){d-=a.s;while(c<this.t)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{d+=this.s;while(c<a.t)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=d<0?-1:0,d<-1?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()}function I(a,b){var c=this.abs(),d=a.abs(),e=c.t;b.t=e+d.t;while(--e>=0)b[e]=0;for(e=0;e<d.t;++e)b[e+c.t]=c.am(0,d[e],b,e,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&g.ZERO.subTo(b,b)}function J(a){var b=this.abs(),c=a.t=2*b.t;while(--c>=0)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()}function K(a,b,c){var d=a.abs();if(d.t<=0)return;var e=this.abs();if(e.t<d.t){b!=null&&b.fromInt(0),c!=null&&this.copyTo(c);return}c==null&&(c=h());var f=h(),i=this.s,j=a.s,k=this.DB-B(d[d.t-1]);k>0?(d.lShiftTo(k,f),e.lShiftTo(k,c)):(d.copyTo(f),e.copyTo(c));var l=f.t,m=f[l-1];if(m==0)return;var n=m*(1<<this.F1)+(l>1?f[l-2]>>this.F2:0),o=this.FV/n,p=(1<<this.F1)/n,q=1<<this.F2,r=c.t,s=r-l,t=b==null?h():b;f.dlShiftTo(s,t),c.compareTo(t)>=0&&(c[c.t++]=1,c.subTo(t,c)),g.ONE.dlShiftTo(l,t),t.subTo(f,f);while(f.t<l)f[f.t++]=0;while(--s>=0){var u=c[--r]==m?this.DM:Math.floor(c[r]*o+(c[r-1]+q)*p);if((c[r]+=f.am(0,u,c,s,0,l))<u){f.dlShiftTo(s,t),c.subTo(t,c);while(c[r]<--u)c.subTo(t,c)}}b!=null&&(c.drShiftTo(l,b),i!=j&&g.ZERO.subTo(b,b)),c.t=l,c.clamp(),k>0&&c.rShiftTo(k,c),i<0&&g.ZERO.subTo(c,c)}function L(a){var b=h();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(g.ZERO)>0&&a.subTo(b,b),b}function M(a){this.m=a}function N(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function O(a){return a}function P(a){a.divRemTo(this.m,null,a)}function Q(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function R(a,b){a.squareTo(b),this.reduce(b)}function S(){if(this.t<1)return 0;var a=this[0];if((a&1)==0)return 0;var b=a&3;return b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b}function T(a){this.m=a,this.mp=a.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function U(a){var b=h();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(g.ZERO)>0&&this.m.subTo(b,b),b}function V(a){var b=h();return a.copyTo(b),this.reduce(b),b}function W(a){while(a.t<=this.mt2)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=a[b]&32767,d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;c=b+this.m.t,a[c]+=this.m.am(0,d,a,b,0,this.m.t);while(a[c]>=a.DV)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function X(a,b){a.squareTo(b),this.reduce(b)}function Y(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function Z(){return(this.t>0?this[0]&1:this.s)==0}function $(a,b){if(a>4294967295||a<1)return g.ONE;var c=h(),d=h(),e=b.convert(this),f=B(a)-1;e.copyTo(c);while(--f>=0){b.sqrTo(c,d);if((a&1<<f)>0)b.mulTo(d,e,c);else{var i=c;c=d,d=i}}return b.revert(c)}function _(a,b){var c;return a<256||b.isEven()?c=new M(b):c=new T(b),this.exp(a,c)}function ab(){var a=h();return this.copyTo(a),a}function bb(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function cb(){return this.t==0?this.s:this[0]<<24>>24}function db(){return this.t==0?this.s:this[0]<<16>>16}function eb(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function fb(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function gb(a){a==null&&(a=10);if(this.signum()==0||a<2||a>36)return"0";var b=this.chunkSize(a),c=Math.pow(a,b),d=u(c),e=h(),f=h(),g="";this.divRemTo(d,e,f);while(e.signum()>0)g=(c+f.intValue()).toString(a).substr(1)+g,e.divRemTo(d,e,f);return f.intValue().toString(a)+g}function hb(a,b){this.fromInt(0),b==null&&(b=10);var c=this.chunkSize(b),d=Math.pow(b,c),e=!1,f=0,h=0;for(var i=0;i<a.length;++i){var j=r(a,i);if(j<0){a.charAt(i)=="-"&&this.signum()==0&&(e=!0);continue}h=b*h+j,++f>=c&&(this.dMultiply(d),this.dAddOffset(h,0),f=0,h=0)}f>0&&(this.dMultiply(Math.pow(b,f)),this.dAddOffset(h,0)),e&&g.ZERO.subTo(this,this)}function ib(a,b,c){if("number"==typeof b)if(a<2)this.fromInt(1);else{this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(g.ONE.shiftLeft(a-1),qb,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(b))this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(g.ONE.shiftLeft(a-1),this)}else{var d=new Array,e=a&7;d.length=(a>>3)+1,b.nextBytes(d),e>0?d[0]&=(1<<e)-1:d[0]=0,this.fromString(d,256)}}function jb(){var a=this.t,b=new Array;b[0]=this.s;var c=this.DB-a*this.DB%8,d,e=0;if(a-->0){c<this.DB&&(d=this[a]>>c)!=(this.s&this.DM)>>c&&(b[e++]=d|this.s<<this.DB-c);while(a>=0){c<8?(d=(this[a]&(1<<c)-1)<<8-c,d|=this[--a]>>(c+=this.DB-8)):(d=this[a]>>(c-=8)&255,c<=0&&(c+=this.DB,--a)),(d&128)!=0&&(d|=-256),e==0&&(this.s&128)!=(d&128)&&++e;if(e>0||d!=this.s)b[e++]=d}}return b}function kb(a){return this.compareTo(a)==0}function lb(a){return this.compareTo(a)<0?this:a}function mb(a){return this.compareTo(a)>0?this:a}function nb(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;d<f;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){e=a.s&this.DM;for(d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{e=this.s&this.DM;for(d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()}function ob(a,b){return a&b}function pb(a){var b=h();return this.bitwiseTo(a,ob,b),b}function qb(a,b){return a|b}function rb(a){var b=h();return this.bitwiseTo(a,qb,b),b}function sb(a,b){return a^b}function tb(a){var b=h();return this.bitwiseTo(a,sb,b),b}function ub(a,b){return a&~b}function vb(a){var b=h();return this.bitwiseTo(a,ub,b),b}function wb(){var a=h();for(var b=0;b<this.t;++b)a[b]=this.DM&~this[b];return a.t=this.t,a.s=~this.s,a}function xb(a){var b=h();return a<0?this.rShiftTo(-a,b):this.lShiftTo(a,b),b}function yb(a){var b=h();return a<0?this.lShiftTo(-a,b):this.rShiftTo(a,b),b}function zb(a){if(a==0)return-1;var b=0;return(a&65535)==0&&(a>>=16,b+=16),(a&255)==0&&(a>>=8,b+=8),(a&15)==0&&(a>>=4,b+=4),(a&3)==0&&(a>>=2,b+=2),(a&1)==0&&++b,b}function Ab(){for(var a=0;a<this.t;++a)if(this[a]!=0)return a*this.DB+zb(this[a]);return this.s<0?this.t*this.DB:-1}function Bb(a){var b=0;while(a!=0)a&=a-1,++b;return b}function Cb(){var a=0,b=this.s&this.DM;for(var c=0;c<this.t;++c)a+=Bb(this[c]^b);return a}function Db(a){var b=Math.floor(a/this.DB);return b>=this.t?this.s!=0:(this[b]&1<<a%this.DB)!=0}function Eb(a,b){var c=g.ONE.shiftLeft(a);return this.bitwiseTo(c,b,c),c}function Fb(a){return this.changeBit(a,qb)}function Gb(a){return this.changeBit(a,ub)}function Hb(a){return this.changeBit(a,sb)}function Ib(a,b){var c=0,d=0,e=Math.min(a.t,this.t);while(c<e)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){d+=a.s;while(c<this.t)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{d+=this.s;while(c<a.t)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=d<0?-1:0,d>0?b[c++]=d:d<-1&&(b[c++]=this.DV+d),b.t=c,b.clamp()}function Jb(a){var b=h();return this.addTo(a,b),b}function Kb(a){var b=h();return this.subTo(a,b),b}function Lb(a){var b=h();return this.multiplyTo(a,b),b}function Mb(){var a=h();return this.squareTo(a),a}function Nb(a){var b=h();return this.divRemTo(a,b,null),b}function Ob(a){var b=h();return this.divRemTo(a,null,b),b}function Pb(a){var b=h(),c=h();return this.divRemTo(a,b,c),new Array(b,c)}function Qb(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()}function Rb(a,b){if(a==0)return;while(this.t<=b)this[this.t++]=0;this[b]+=a;while(this[b]>=this.DV)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}function Sb(){}function Tb(a){return a}function Ub(a,b,c){a.multiplyTo(b,c)}function Vb(a,b){a.squareTo(b)}function Wb(a){return this.exp(a,new Sb)}function Xb(a,b,c){var d=Math.min(this.t+a.t,b);c.s=0,c.t=d;while(d>0)c[--d]=0;var e;for(e=c.t-this.t;d<e;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(e=Math.min(a.t,b);d<e;++d)this.am(0,a[d],c,d,0,b-d);c.clamp()}function Yb(a,b,c){--b;var d=c.t=this.t+a.t-b;c.s=0;while(--d>=0)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)}function Zb(a){this.r2=h(),this.q3=h(),g.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function $b(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=h();return a.copyTo(b),this.reduce(b),b}function _b(a){return a}function ac(a){a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(a.compareTo(this.r2)<0)a.dAddOffset(1,this.m.t+1);a.subTo(this.r2,a);while(a.compareTo(this.m)>=0)a.subTo(this.m,a)}function bc(a,b){a.squareTo(b),this.reduce(b)}function cc(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function dc(a,b){var c=a.bitLength(),d,e=u(1),f;if(c<=0)return e;c<18?d=1:c<48?d=3:c<144?d=4:c<768?d=5:d=6,c<8?f=new M(b):b.isEven()?f=new Zb(b):f=new T(b);var g=new Array,i=3,j=d-1,k=(1<<d)-1;g[1]=f.convert(this);if(d>1){var l=h();f.sqrTo(g[1],l);while(i<=k)g[i]=h(),f.mulTo(l,g[i-2],g[i]),i+=2}var m=a.t-1,n,o=!0,p=h(),q;c=B(a[m])-1;while(m>=0){c>=j?n=a[m]>>c-j&k:(n=(a[m]&(1<<c+1)-1)<<j-c,m>0&&(n|=a[m-1]>>this.DB+c-j)),i=d;while((n&1)==0)n>>=1,--i;(c-=i)<0&&(c+=this.DB,--m);if(o)g[n].copyTo(e),o=!1;else{while(i>1)f.sqrTo(e,p),f.sqrTo(p,e),i-=2;i>0?f.sqrTo(e,p):(q=e,e=p,p=q),f.mulTo(p,g[n],e)}while(m>=0&&(a[m]&1<<c)==0)f.sqrTo(e,p),q=e,e=p,p=q,--c<0&&(c=this.DB-1,--m)}return f.revert(e)}function ec(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(f<0)return b;e<f&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));while(b.signum()>0)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c}function fc(a){if(a<=0)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(b==0)c=this[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this[d])%a;return c}function gc(a){var b=a.isEven();if(this.isEven()&&b||a.signum()==0)return g.ZERO;var c=a.clone(),d=this.clone(),e=u(1),f=u(0),h=u(0),i=u(1);while(c.signum()!=0){while(c.isEven()){c.rShiftTo(1,c);if(b){if(!e.isEven()||!f.isEven())e.addTo(this,e),f.subTo(a,f);e.rShiftTo(1,e)}else f.isEven()||f.subTo(a,f);f.rShiftTo(1,f)}while(d.isEven()){d.rShiftTo(1,d);if(b){if(!h.isEven()||!i.isEven())h.addTo(this,h),i.subTo(a,i);h.rShiftTo(1,h)}else i.isEven()||i.subTo(a,i);i.rShiftTo(1,i)}c.compareTo(d)>=0?(c.subTo(d,c),b&&e.subTo(h,e),f.subTo(i,f)):(d.subTo(c,d),b&&h.subTo(e,h),i.subTo(f,i))}return d.compareTo(g.ONE)!=0?g.ZERO:i.compareTo(a)>=0?i.subtract(a):i.signum()<0?(i.addTo(a,i),i.signum()<0?i.add(a):i):i}function jc(a){var b,c=this.abs();if(c.t==1&&c[0]<=hc[hc.length-1]){for(b=0;b<hc.length;++b)if(c[0]==hc[b])return!0;return!1}if(c.isEven())return!1;b=1;while(b<hc.length){var d=hc[b],e=b+1;while(e<hc.length&&d<ic)d*=hc[e++];d=c.modInt(d);while(b<e)if(d%hc[b++]==0)return!1}return c.millerRabin(a)}function kc(a){var b=this.subtract(g.ONE),c=b.getLowestSetBit();if(c<=0)return!1;var d=b.shiftRight(c);a=a+1>>1,a>hc.length&&(a=hc.length);var e=h();for(var f=0;f<a;++f){e.fromInt(hc[Math.floor(Math.random()*hc.length)]);var i=e.modPow(d,this);if(i.compareTo(g.ONE)!=0&&i.compareTo(b)!=0){var j=1;while(j++<c&&i.compareTo(b)!=0){i=i.modPowInt(2,this);if(i.compareTo(g.ONE)==0)return!1}if(i.compareTo(b)!=0)return!1}}return!0}var d,e=0xdeadbeefcafe,f=(e&16777215)==15715070,g=function(b,c,d){b!=null&&("number"==typeof b?this.fromNumber(b,c,d):c==null&&"string"!=typeof b?this.fromString(b,256):this.fromString(b,c))},h=function(){return new g(null)};f&&"undefined"!=typeof navigator&&navigator.appName=="Microsoft Internet Explorer"?(g.prototype.am=j,d=30):f&&"undefined"!=typeof navigator&&navigator.appName!="Netscape"?(g.prototype.am=i,d=26):(g.prototype.am=k,d=28),g.prototype.DB=d,g.prototype.DM=(1<<d)-1,g.prototype.DV=1<<d;var l=52;g.prototype.FV=Math.pow(2,l),g.prototype.F1=l-d,g.prototype.F2=2*d-l;var m="0123456789abcdefghijklmnopqrstuvwxyz",n=new Array,o,p;o="0".charCodeAt(0);for(p=0;p<=9;++p)n[o++]=p;o="a".charCodeAt(0);for(p=10;p<36;++p)n[o++]=p;o="A".charCodeAt(0);for(p=10;p<36;++p)n[o++]=p;M.prototype.convert=N,M.prototype.revert=O,M.prototype.reduce=P,M.prototype.mulTo=Q,M.prototype.sqrTo=R,T.prototype.convert=U,T.prototype.revert=V,T.prototype.reduce=W,T.prototype.mulTo=Y,T.prototype.sqrTo=X,Sb.prototype.convert=Tb,Sb.prototype.revert=Tb,Sb.prototype.mulTo=Ub,Sb.prototype.sqrTo=Vb,Zb.prototype.convert=$b,Zb.prototype.revert=_b,Zb.prototype.reduce=ac,Zb.prototype.mulTo=cc,Zb.prototype.sqrTo=bc;var hc=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ic=(1<<26)/hc[hc.length-1];g.prototype.chunkSize=eb,g.prototype.toRadix=gb,g.prototype.fromRadix=hb,g.prototype.fromNumber=ib,g.prototype.bitwiseTo=nb,g.prototype.changeBit=Eb,g.prototype.addTo=Ib,g.prototype.dMultiply=Qb,g.prototype.dAddOffset=Rb,g.prototype.multiplyLowerTo=Xb,g.prototype.multiplyUpperTo=Yb,g.prototype.modInt=fc,g.prototype.millerRabin=kc,g.prototype.clone=ab,g.prototype.intValue=bb,g.prototype.byteValue=cb,g.prototype.shortValue=db,g.prototype.signum=fb,g.prototype.toByteArray=jb,g.prototype.equals=kb,g.prototype.min=lb,g.prototype.max=mb,g.prototype.and=pb,g.prototype.or=rb,g.prototype.xor=tb,g.prototype.andNot=vb,g.prototype.not=wb,g.prototype.shiftLeft=xb,g.prototype.shiftRight=yb,g.prototype.getLowestSetBit=Ab,g.prototype.bitCount=Cb,g.prototype.testBit=Db,g.prototype.setBit=Fb,g.prototype.clearBit=Gb,g.prototype.flipBit=Hb,g.prototype.add=Jb,g.prototype.subtract=Kb,g.prototype.multiply=Lb,g.prototype.divide=Nb,g.prototype.remainder=Ob,g.prototype.divideAndRemainder=Pb,g.prototype.modPow=dc,g.prototype.modInverse=gc,g.prototype.pow=Wb,g.prototype.gcd=ec,g.prototype.isProbablePrime=jc,g.prototype.square=Mb,g.prototype.copyTo=s,g.prototype.fromInt=t,g.prototype.fromString=v,g.prototype.clamp=w,g.prototype.dlShiftTo=D,g.prototype.drShiftTo=E,g.prototype.lShiftTo=F,g.prototype.rShiftTo=G,g.prototype.subTo=H,g.prototype.multiplyTo=I,g.prototype.squareTo=J,g.prototype.divRemTo=K,g.prototype.invDigit=S,g.prototype.isEven=Z,g.prototype.exp=$,g.prototype.toString=x,g.prototype.negate=y,g.prototype.abs=z,g.prototype.compareTo=A,g.prototype.bitLength=C,g.prototype.mod=L,g.prototype.modPowInt=_,g.ZERO=u(0),g.ONE=u(1),b.nbi=h,b.BigInteger=g},8:function(a,b,c){(function(a){function d(){}var c=Array.isArray;b.EventEmitter=d;var e=10;d.prototype.setMaxListeners=function(a){this._events||(this._events={}),this._maxListeners=a},d.prototype.emit=function(){var a=arguments[0];if(a==="error")if(!this._events||!this._events.error||c(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var b=this._events[a];if(!b)return!1;if(typeof b=="function"){switch(arguments.length){case 1:b.call(this);break;case 2:b.call(this,arguments[1]);break;case 3:b.call(this,arguments[1],arguments[2]);break;default:var d=arguments.length,e=new Array(d-1);for(var f=1;f<d;f++)e[f-1]=arguments[f];b.apply(this,e)}return!0}if(c(b)){var d=arguments.length,e=new Array(d-1);for(var f=1;f<d;f++)e[f-1]=arguments[f];var g=b.slice();for(var f=0,d=g.length;f<d;f++)g[f].apply(this,e);return!0}return!1},d.prototype.addListener=function(b,d){if("function"!=typeof d)throw new Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",b,typeof d.listener=="function"?d.listener:d),this._events[b]?c(this._events[b])?this._events[b].push(d):this._events[b]=[this._events[b],d]:this._events[b]=d;if(c(this._events[b])&&!this._events[b].warned){var f;this._maxListeners!==undefined?f=this._maxListeners:f=e,f&&f>0&&this._events[b].length>f&&(this._events[b].warned=!0,a.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[b].length),a.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function d(){c.removeListener(a,d),b.apply(this,arguments)}if("function"!=typeof b)throw new Error(".once only takes instances of Function");var c=this;return d.listener=b,c.on(a,d),this},d.prototype.removeListener=function(a,b){if("function"!=typeof b)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[a])return this;var d=this._events[a];if(c(d)){var e=-1;for(var f=0,g=d.length;f<g;f++)if(d[f]===b||d[f].listener&&d[f].listener===b){e=f;break}if(e<0)return this;d.splice(e,1),d.length==0&&delete this._events[a]}else(d===b||d.listener&&d.listener===b)&&delete this._events[a];return this},d.prototype.removeAllListeners=function(a){return arguments.length===0?(this._events={},this):(a&&this._events&&this._events[a]&&(this._events[a]=null),this)},d.prototype.listeners=function(a){return this._events||(this._events={}),this._events[a]||(this._events[a]=[]),c(this._events[a])||(this._events[a]=[this._events[a]]),this._events[a]}})(c(1))},9:function(a,b,c){var d=c(3),e=c(5),f=c(7),g=c(4),h=f.BigInteger,i=f.nbi,j={},k=j.alphabets={ripple:"rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz",tipple:"RPShNAF39wBUDnEGHJKLM4pQrsT7VWXYZ2bcdeCg65jkm8ofqi1tuvaxyz",bitcoin:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"};g(j,{VER_NONE:1,VER_NODE_PUBLIC:28,VER_NODE_PRIVATE:32,VER_ACCOUNT_ID:0,VER_ACCOUNT_PUBLIC:35,VER_ACCOUNT_PRIVATE:34,VER_FAMILY_GENERATOR:41,VER_FAMILY_SEED:33});var l=function(a){return d.codec.bytes.fromBits(d.hash.sha256.hash(d.codec.bytes.toBits(a)))},m=function(a){return l(l(a))};j.encode=function(a,b){var c=k[b||"ripple"],d=new h(String(c.length)),e=i(),f=i(),g=new h(a),j=[];while(g.compareTo(h.ZERO)>0)g.divRemTo(d,e,f),e.copyTo(g),j.push(c[f.intValue()]);var l;for(l=0;l!=a.length&&!a[l];l+=1)j.push(c[0]);return j.reverse().join("")},j.decode=function(a,b){var c=k[b||"ripple"],d=new h(String(c.length)),f=i(),g;for(g=0;g!=a.length&&a[g]===c[0];g+=1);for(;g!=a.length;g+=1){var j=c.indexOf(a[g]);if(j<0)return undefined;var l=i();l.fromInt(j),f=f.multiply(d).add(l)}var m=f.toByteArray().map(function(a){return a?a<0?256+a:a:0}),n=0;while(n!=m.length&&!m[n])n+=1;n&&(m=m.slice(n));var o=0;while(o!==a.length&&a[o]===c[0])o+=1;return[].concat(e.arraySet(o,0),m)},j.encode_check=function(a,b,c){var d=[].concat(a,b),e=l(l(d)).slice(0,4);return j.encode([].concat(d,e),c)},j.decode_check=function(a,b,c){var d=j.decode(b,c);if(!d||d[0]!==a||d.length<5)return NaN;var e=m(d.slice(0,-4)).slice(0,4),f=d.slice(-4),g;for(g=0;g!=4;g+=1)if(e[g]!==f[g])return NaN;return d[0]=0,new h(d.slice(0,-4),256)},b.Base=j},10:function(a,b,c){var d=c(3),e=c(5),f=c(6),g=c(7),h=c(4),i=g.BigInteger,j=g.nbi,k=c(11).UInt,l=c(9).Base,m=h(function(){this._value=NaN},k);m.width=20,m.prototype=h({},k.prototype),m.prototype.constructor=m;var n=m.ADDRESS_ZERO="rrrrrrrrrrrrrrrrrrrrrhoLvTp",o=m.ADDRESS_ONE="rrrrrrrrrrrrrrrrrrrrBZbvji",p=m.HEX_ZERO="0000000000000000000000000000000000000000",q=m.HEX_ONE="0000000000000000000000000000000000000001",r=m.STR_ZERO=e.hexToString(p),s=m.STR_ONE=e.hexToString(q);m.prototype.parse_json=function(a){return f.accounts&&a in f.accounts&&(a=f.accounts[a].account),"string"!=typeof a?this._value=NaN:a[0]==="r"?this._value=l.decode_check(l.VER_ACCOUNT_ID,a):this._value=NaN,this},m.prototype.to_json=function(a){a=a||{};if(this._value instanceof i){var b=l.encode_check(l.VER_ACCOUNT_ID,this.to_bytes());return a.gateways&&b in a.gateways&&(b=a.gateways[b]),b}return NaN},b.UInt160=m},11:function(a,b,c){var d=c(3),e=c(5),f=c(6),g=c(7),h=g.BigInteger,i=g.nbi,j=c(9).Base,k=function(){this._value=NaN};k.json_rewrite=function(a,b){return this.from_json(a).to_json(b)},k.from_generic=function(a){return a instanceof this?a.clone():(new this).parse_generic(a)},k.from_hex=function(a){return a instanceof this?a.clone():(new this).parse_hex(a)},k.from_json=function(a){return a instanceof this?a.clone():(new this).parse_json(a)},k.from_bits=function(a){return a instanceof this?a.clone():(new this).parse_bits(a)},k.from_bn=function(a){return a instanceof this?a.clone():(new this).parse_bn(a)},k.is_valid=function(a){return this.from_json(a).is_valid()},k.prototype.clone=function(){return this.copyTo(new this.constructor)},k.prototype.copyTo=function(a){return a._value=this._value,a},k.prototype.equals=function(a){return this._value instanceof h&&a._value instanceof h&&this._value.equals(a._value)},k.prototype.is_valid=function(){return this._value instanceof h},k.prototype.is_zero=function(){return this._value.equals(h.ZERO)},k.prototype.parse_generic=function(a){f.accounts&&a in f.accounts&&(a=f.accounts[a].account);switch(a){case undefined:case"0":case this.constructor.STR_ZERO:case this.constructor.ADDRESS_ZERO:case this.constructor.HEX_ZERO:this._value=i();break;case"1":case this.constructor.STR_ONE:case this.constructor.ADDRESS_ONE:case this.constructor.HEX_ONE:this._value=new h([1]);break;default:"string"!=typeof a?this._value=NaN:a[0]==="r"?this._value=j.decode_check(j.VER_ACCOUNT_ID,a):this.constructor.width===a.length?this._value=new h(e.stringToArray(a),256):this.constructor.width*2===a.length?this._value=new h(a,16):this._value=NaN}return this},k.prototype.parse_hex=function(a){return"string"==typeof a&&a.length===this.constructor.width*2?this._value=new h(a,16):this._value=NaN,this},k.prototype.parse_bits=function(a){if(d.bitArray.bitLength(a)!==this.constructor.width*8)this._value=NaN;else{var b=d.codec.bytes.fromBits(a);this._value=new h(b,256)}return this},k.prototype.parse_json=k.prototype.parse_hex,k.prototype.parse_bn=function(a){if(a instanceof d.bn&&a.bitLength()<=this.constructor.width*8){var b=d.codec.bytes.fromBits(a.toBits());this._value=new h(b,256)}else this._value=NaN;return this},k.prototype.to_bytes=function(){if(this._value instanceof h){var a=this._value.toByteArray();a=a.map(function(a){return(a+256)%256});var b=this.constructor.width;a=a.slice(-b);while(a.length<b)a.unshift(0);return a}return null},k.prototype.to_hex=function(){if(this._value instanceof h){var a=this.to_bytes();return d.codec.hex.fromBits(d.codec.bytes.toBits(a)).toUpperCase()}return null},k.prototype.to_json=k.prototype.to_hex,k.prototype.to_bits=function(){if(this._value instanceof h){var a=this.to_bytes();return d.codec.bytes.toBits(a)}return null},k.prototype.to_bn=function(){if(this._value instanceof h){var a=this.to_bits();return d.bn.fromBits(a)}return null},b.UInt=k},12:function(a,b,c){var d=c(3),e=c(5),f=c(6),g=c(7),h=c(4),i=g.BigInteger,j=g.nbi,k=c(11).UInt,l=c(9).Base,m=h(function(){this._value=NaN},k);m.width=32,m.prototype=h({},k.prototype),m.prototype.constructor=m;var n=m.ADDRESS_ZERO="XXX",o=m.ADDRESS_ONE="XXX",p=m.HEX_ZERO="0000000000000000000000000000000000000000000000000000000000000000",q=m.HEX_ONE="0000000000000000000000000000000000000000000000000000000000000001",r=m.STR_ZERO=e.hexToString(p),s=m.STR_ONE=e.hexToString(q);b.UInt256=m},13:function(a,b,c){var d=c(16),e=b.REQUIRED=0,f=b.OPTIONAL=1,g=b.DEFAULT=2;d.Int16.id=1,d.Int32.id=2,d.Int64.id=3,d.Hash128.id=4,d.Hash256.id=5,d.Amount.id=6,d.VariableLength.id=7,d.Account.id=8,d.Object.id=14,d.Array.id=15,d.Int8.id=16,d.Hash160.id=17,d.PathSet.id=18,d.Vector256.id=19;var h=[["TransactionType",e,2,d.Int16],["Flags",f,2,d.Int32],["SourceTag",f,3,d.Int32],["Account",e,1,d.Account],["Sequence",e,4,d.Int32],["Fee",e,8,d.Amount],["OperationLimit",f,29,d.Int32],["SigningPubKey",e,3,d.VariableLength],["TxnSignature",f,4,d.VariableLength]];b.tx={AccountSet:[3].concat(h,[["EmailHash",f,1,d.Hash128],["WalletLocator",f,7,d.Hash256],["WalletSize",f,12,d.Int32],["MessageKey",f,2,d.VariableLength],["Domain",f,7,d.VariableLength],["TransferRate",f,11,d.Int32]]),TrustSet:[20].concat(h,[["LimitAmount",f,3,d.Amount],["QualityIn",f,20,d.Int32],["QualityOut",f,21,d.Int32]]),OfferCreate:[7].concat(h,[["TakerPays",e,4,d.Amount],["TakerGets",e,5,d.Amount],["Expiration",f,10,d.Int32]]),OfferCancel:[8].concat(h,[["OfferSequence",e,25,d.Int32]]),SetRegularKey:[5].concat(h,[["RegularKey",e,8,d.Account]]),Payment:[0].concat(h,[["Destination",e,3,d.Account],["Amount",e,1,d.Amount],["SendMax",f,9,d.Amount],["Paths",g,1,d.PathSet],["InvoiceID",f,17,d.Hash256],["DestinationTag",f,14,d.Int32]]),Contract:[9].concat(h,[["Expiration",e,10,d.Int32],["BondAmount",e,23,d.Int32],["StampEscrow",e,22,d.Int32],["RippleEscrow",e,17,d.Amount],["CreateCode",f,11,d.VariableLength],["FundCode",f,8,d.VariableLength],["RemoveCode",f,9,d.VariableLength],["ExpireCode",f,10,d.VariableLength]]),RemoveContract:[10].concat(h,[["Target",e,7,d.Account]]),EnableFeature:[100].concat(h,[["Feature",e,19,d.Hash256]]),SetFee:[101].concat(h,[["Features",e,9,d.Array],["BaseFee",e,5,d.Int64],["ReferenceFeeUnits",e,30,d.Int32],["ReserveBase",e,31,d.Int32],["ReserveIncrement",e,32,d.Int32]])}},14:function(a,b,c){var d=function(){this._value=NaN};d.json_rewrite=function(a){return d.from_json(a).to_json()},d.from_json=function(a){return"string"==typeof a?(new d).parse_json(a):a.clone()},d.is_valid=function(a){return d.from_json(a).is_valid()},d.prototype.clone=function(){return this.copyTo(new d)},d.prototype.copyTo=function(a){return a._value=this._value,a},d.prototype.equals=function(a){return"string"!=typeof this._value&&isNaN(this._value)||"string"!=typeof a._value&&isNaN(a._value)?!1:this._value===a._value},d.prototype.parse_json=function(a){return""===a||"0"===a||"XRP"===a?this._value=0:"string"!=typeof a||3!==a.length?this._value=NaN:this._value=a,this},d.prototype.is_native=function(){return!isNaN(this._value)&&!this._value},d.prototype.is_valid=function(){return!isNaN(this._value)},d.prototype.to_json=function(){return this._value?this._value:"XRP"},d.prototype.to_human=function(){return this._value?this._value:"XRP"},b.Currency=d},15:function(a,b,c){function n(a,b){return[].concat(a,b>>24,b>>16&255,b>>8&255,b&255)}function o(a){return d.bitArray.bitSlice(d.hash.sha512.hash(d.codec.bytes.toBits(a)),0,256)}function p(a){return d.hash.ripemd160.hash(d.hash.sha256.hash(a))}var d=c(3),e=c(5),f=c(7),g=c(4),h=f.BigInteger,i=c(9).Base,j=c(11).UInt,k=c(12).UInt256,l=c(18).KeyPair,m=g(function(){this._curve=d.ecc.curves.c256,this._value=NaN},j);m.width=16,m.prototype=g({},j.prototype),m.prototype.constructor=m,m.prototype.parse_json=function(a){return"string"==typeof a?a.length?a[0]==="s"?this._value=i.decode_check(i.VER_FAMILY_SEED,a):a.length===32?this._value=this.parse_hex(a):this.parse_passphrase(a):this._value=NaN:this._value=NaN,this},m.prototype.parse_passphrase=function(a){if("string"!=typeof a)throw new Error("Passphrase must be a string");var b=d.hash.sha512.hash(d.codec.utf8String.toBits(a)),c=d.bitArray.bitSlice(b,0,128);return this.parse_bits(c),this},m.prototype.to_json=function(){if(this._value instanceof h){var a=i.encode_check(i.VER_FAMILY_SEED,this.to_bytes());return a}return NaN},m.prototype.get_key=function(a){if(!this.is_valid())throw new Error("Cannot generate keys from invalid seed!");var b=this._curve,c=0,e,f,g=0;do e=d.bn.fromBits(o(n(this.to_bytes(),g))),g++;while(!b.r.greaterEquals(e));f=b.G.mult(e);var h;g=0;do h=d.bn.fromBits(o(n(n(f.toBytesCompressed(),c),g))),g++;while(!b.r.greaterEquals(h));return h=h.add(e).mod(b.r),l.from_bn_secret(h)},b.Seed=m},16:function(a,b,c){var d=c(4),e=c(5),f=c(3),g=c(2),h=g.UInt160,i=g.Amount,j=g.Currency,k=f.codec.hex,l=f.codec.bytes,m=function(a){d(this,a)};m.prototype.serialize_hex=function(a,b){var c=l.fromBits(k.toBits(b));this.serialize_varint(a,c.length),a.append(c)},m.prototype.serialize_varint=function(a,b){if(b<0)throw new Error("Variable integers are unsigned.");if(b<=192)a.append([b]);else if(b<=12,480)b-=193,a.append([193+(b>>>8),b&255]);else{if(!(b<=918744))throw new Error("Variable integer overflow.");b-=12481,a.append([241+(b>>>16),b>>>8&255,b&255])}};var n=b.Int8=new m({serialize:function(a,b){a.append([b&255])},parse:function(a){return a.read(1)[0]}}),o=b.Int16=new m({serialize:function(a,b){a.append([b>>>8&255,b&255])},parse:function(a){throw new Error("Parsing Int16 not implemented")}}),p=b.Int32=new m({serialize:function(a,b){a.append([b>>>24&255,b>>>16&255,b>>>8&255,b&255])},parse:function(a){throw new Error("Parsing Int32 not implemented")}}),q=b.Int64=new m({serialize:function(a,b){throw new Error("Serializing Int64 not implemented")},parse:function(a){throw new Error("Parsing Int64 not implemented")}}),r=b.Hash128=new m({serialize:function(a,b){throw new Error("Serializing Hash128 not implemented")},parse:function(a){throw new Error("Parsing Hash128 not implemented")}}),s=b.Hash256=new m({serialize:function(a,b){throw new Error("Serializing Hash256 not implemented")},parse:function(a){throw new Error("Parsing Hash256 not implemented")}}),t=b.Hash160=new m({serialize:function(a,b){throw new Error("Serializing Hash160 not implemented")},parse:function(a){throw new Error("Parsing Hash160 not implemented")}}),u=new m({serialize:function(a,b){var c=b.to_json();if("string"!=typeof c||c.length!==3)throw new Error("Tried to serialize invalid/unimplemented currency type.");var d=c.toUpperCase(),f=e.arraySet(20,0);if(!/^[A-Z]{3}$/.test(d))throw new Error("Invalid currency code");f[12]=d.charCodeAt(0)&255,f[13]=d.charCodeAt(1)&255,f[14]=d.charCodeAt(2)&255,a.append(f)},parse:function(a){throw new Error("Parsing Currency not implemented")}}),v=b.Amount=new m({serialize:function(a,b){var c=i.from_json(b);if(!c.is_valid())throw new Error("Not a valid Amount object.");var d=e.arraySet(8,0);if(c.is_native()){var g=c._value.toString(16);if(g.length>16)throw new Error("Value out of bounds");while(g.length<16)g="0"+g;d=l.fromBits(k.toBits(g)),d[0]&=63,c.is_negative()||(d[0]|=64)}else{var h=0,j=0;h|=1<<31,c.is_zero()||(c.is_negative()||(h|=1<<30),h|=(97+c._offset&255)<<22,h|=c._value.shiftRight(32).intValue()&4194303,j=c._value.intValue()&4294967295),d=f.codec.bytes.fromBits([h,j])}a.append(d);if(!c.is_native()){var m=c.currency();u.serialize(a,m),a.append(c.issuer().to_bytes())}},parse:function(a){throw new Error("Parsing Amount not implemented")}}),w=b.VariableLength=new m({serialize:function(a,b){if("string"!=typeof b)throw new Error("Unknown datatype.");this.serialize_hex(a,b)},parse:function(a){throw new Error("Parsing VL not implemented")}}),x=b.Account=new m({serialize:function(a,b){var c=h.from_json(b);this.serialize_hex(a,c.to_hex())},parse:function(a){throw new Error("Parsing Account not implemented")}}),y=b.PathSet=new m({serialize:function(a,b){for(var c=0,d=b.length;c<d;c++){for(var e=0,f=b[c].length;e<f;e++){var g=b[c][e],i=0;g.account&&(i|=1),g.currency&&(i|=16),g.issuer&&(i|=32),n.serialize(a,i),g.account&&a.append(h.from_json(g.account).to_bytes());if(g.currency){var k=j.from_json(g.currency);u.serialize(a,k)}g.issuer&&a.append(h.from_json(g.issuer).to_bytes())}e<f&&n.serialize(a,255)}n.serialize(a,0)},parse:function(a){throw new Error("Parsing PathSet not implemented")}}),z=b.Vector256=new m({serialize:function(a,b){throw new Error("Serializing Vector256 not implemented")},parse:function(a){throw new Error("Parsing Vector256 not implemented")}}),A=b.Object=new m({serialize:function(a,b){throw new Error("Serializing Object not implemented")},parse:function(a){throw new Error("Parsing Object not implemented")}}),B=b.Array=new m({serialize:function(a,b){throw new Error("Serializing Array not implemented")},parse:function(a){throw new Error("Parsing Array not implemented")}})},17:function(a,b,c){var d=c(8).EventEmitter,e=c(2).Amount,f=c(10).UInt160,g=c(4),h=function(a,b){var c=this;return this._remote=a,this._account=f.from_json(b),this._account_id=this._account.to_json(),this._subs=0,this._entry={},this.on("newListener",function(a,b){h.subscribe_events.indexOf(a)!==-1&&(!c._subs&&"open"===c._remote._online_state&&c._remote.request_subscribe().accounts(c._account_id).request(),c._subs+=1)}),this.on("removeListener",function(a,b){h.subscribe_events.indexOf(a)!==-1&&(c._subs-=1,!c._subs&&"open"===c._remote._online_state&&c._remote.request_unsubscribe().accounts(c._account_id).request())}),this._remote.on("connect",function(){c._subs&&c._remote.request_subscribe().accounts(c._account_id).request()}),this.on("transaction",function(a){var b=!1;a.mmeta.each(function(a){a.entryType==="AccountRoot"&&a.fields.Account===c._account_id&&(g(c._entry,a.fieldsNew,a.fieldsFinal),b=!0)}),b&&c.emit("entry",c._entry)}),this};h.prototype=new d,h.subscribe_events=["transaction","entry"],h.prototype.to_json=function(){return this._account.to_json()},h.prototype.is_valid=function(){return this._account.is_valid()},h.prototype.entry=function(a){var b=this;return b._remote.request_account_info(this._account_id).on("success",function(c){g(b._entry,c.account_data),b.emit("entry",b._entry),"function"==typeof a&&a(null,c)}).on("error",function(b){a(b)}).request(),this},b.Account=h},18:function(a,b,c){var d=c(3),e=c(12).UInt256,f=function(){this._curve=d.ecc.curves.c256,this._secret=null,this._pubkey=null};f.from_bn_secret=function(a){return a instanceof this?a.clone():(new this).parse_bn_secret(a)},f.prototype.parse_bn_secret=function(a){return this._secret=new d.ecc.ecdsa.secretKey(d.ecc.curves.c256,a),this},f.prototype._pub=function(){var a=this._curve;if(!this._pubkey&&this._secret){var b=this._secret._exponent;this._pubkey=new d.ecc.ecdsa.publicKey(a,a.G.mult(b))}return this._pubkey},f.prototype.to_hex_pub=function(){var a=this._pub();if(!a)return null;var b=a._point,c=b.y.mod(2).equals(0);return d.codec.hex.fromBits(d.bitArray.concat([d.bitArray.partial(8,c?2:3)],b.x.toBits(this._curve.r.bitLength()))).toUpperCase()},f.prototype.sign=function(a){return a=e.from_json(a),this._secret.signDER(a.to_bits(),0)},b.KeyPair=f},19:function(a,b,c){var d=c(4),e=c(10).UInt160,f=c(2).Amount,g=function(a){this.nodes=[];for(var b=0,c=a.AffectedNodes.length;b<c;b++){var e=a.AffectedNodes[b],f={};["CreatedNode","ModifiedNode","DeletedNode"].forEach(function(a){e[a]&&(f.diffType=a)});if(!f.diffType)return null;e=e[f.diffType],f.entryType=e.LedgerEntryType,f.ledgerIndex=e.LedgerIndex,f.fields=d({},e.PreviousFields,e.NewFields,e.FinalFields),f.fieldsPrev=e.PreviousFields||{},f.fieldsNew=e.NewFields||{},f.fieldsFinal=e.FinalFields||{},this.nodes.push(f)}};g.prototype.each=function(a){for(var b=0,c=this.nodes.length;b<c;b++)a(this.nodes[b],b)};var h=["LowLimit","HighLimit","TakerPays","TakerGets"];g.prototype.getAffectedAccounts=function(){var a=[];return this.each(function(b){var c=b.diffType==="CreatedNode"?b.fieldsNew:b.fieldsFinal;for(var d in c){var g=c[d];if("string"==typeof g&&e.is_valid(g))a.push(g);else if(h.indexOf(d)!==-1){var i=f.from_json(g),j=i.issuer();j.is_valid()&&!j.is_zero()&&a.push(j.to_json())}}}),a},b.Meta=g},20:function(a,b,c){var d=c(8).EventEmitter,e=c(2).Amount,f=c(10).UInt160,g=c(14).Currency,h=c(4),i=function(a,b,c,d,e){var f=this;return this._remote=a,this._currency_out=b,this._issuer_out=c,this._currency_in=d,this._issuer_in=e,this._subs=0,this._entry={},this.on("newListener",function(a,b){i.subscribe_events.indexOf(a)!==-1&&(!f._subs&&"open"===f._remote._online_state&&f._remote.request_subscribe().books([f.to_json()]).request(),f._subs+=1)}),this.on("removeListener",function(a,b){i.subscribe_events.indexOf(a)!==-1&&(f._subs-=1,!f._subs&&"open"===f._remote._online_state&&f._remote.request_unsubscribe().books([f.to_json()]).request())}),this._remote.on("connect",function(){f._subs&&f._remote.request_subscribe().books([f.to_json()]).request()}),this};i.prototype=new d,i.subscribe_events=["transaction"],i.prototype.to_json=function(){var a={CurrencyOut:this._currency_out,CurrencyIn:this._currency_in};return a.CurrencyOut!=="XRP"&&(a.IssuerOut=this._issuer_out),a.CurrencyIn!=="XRP"&&(a.IssuerIn=this._issuer_in),a},i.prototype.is_valid=function(){return g.is_valid(this._currency_in)&&this._currency_in!=="XRP"&&f.is_valid(this._issuer_in)&&g.is_valid(this._currency_out)&&this._currency_out!=="XRP"&&f.is_valid(this._issuer_out)&&(this._currency_in!=="XRP"||this._currency_out!=="XRP")},b.OrderBook=i},21:function(a,b,c){(function(a){var d=c(8).EventEmitter,e=c(2).Amount,f=c(2).Currency,g=c(2).UInt160,h=c(23).Transaction,i=c(17).Account,j=c(19).Meta,k=c(20).OrderBook,l=c(5),m=c(6),n=function(a,b){var c=this;this.message={command:b,id:undefined},this.remote=a,this.requested=!1};n.prototype=new d,n.prototype.request=function(a){this.requested||(this.requested=!0,this.remote.request(this),this.emit("request",a))},n.prototype.build_path=function(a){return a&&(this.message.build_path=!0),this},n.prototype.ledger_choose=function(a){return a?this.message.ledger_index=this.remote._ledger_current_index:this.message.ledger_hash=this.remote._ledger_hash,this},n.prototype.ledger_hash=function(a){return this.message.ledger_hash=a,this},n.prototype.ledger_index=function(a){return this.message.ledger_index=a,this},n.prototype.account_root=function(a){return this.message.account_root=g.json_rewrite(a),this},n.prototype.index=function(a){return this.message.index=a,this},n.prototype.offer_id=function(a,b){return this.message.offer={account:g.json_rewrite(a),seq:b},this},n.prototype.offer_index=function(a){return this.message.offer=a,this},n.prototype.secret=function(a){return a&&(this.message.secret=a),this},n.prototype.tx_hash=function(a){return this.message.tx_hash=a,this},n.prototype.tx_json=function(a){return this.message.tx_json=a,this},n.prototype.tx_blob=function(a){return this.message.tx_blob=a,this},n.prototype.ripple_state=function(a,b,c){return this.message.ripple_state={accounts:[g.json_rewrite(a),g.json_rewrite(b)],currency:c},this},n.prototype.accounts=function(a,b){"object"!=typeof a&&(a=[a]);var c=[];for(var d=0,e=a.length;d<e;d++)c.push(g.json_rewrite(a[d]));return b?this.message.rt_accounts=c:this.message.accounts=c,this},n.prototype.rt_accounts=function(a){return this.accounts(a,!0)},n.prototype.books=function(a){var b=[];for(var c=0,d=a.length;c<d;c++){var e=a[c],h={CurrencyOut:f.json_rewrite(e.CurrencyOut),CurrencyIn:f.json_rewrite(e.CurrencyIn)};h.CurrencyOut!=="XRP"&&(h.IssuerOut=g.json_rewrite(e.IssuerOut)),h.CurrencyIn!=="XRP"&&(h.IssuerIn=g.json_rewrite(e.IssuerIn)),b.push(h)}return this.message.books=b,this};var o=function(a,b){var c=this;this.trusted=a.trusted,this.websocket_ip=a.websocket_ip,this.websocket_port=a.websocket_port,this.websocket_ssl=a.websocket_ssl,this.local_sequence=a.local_sequence,this.local_fee=a.local_fee,this.local_signing=a.local_signing,this.id=0,this.trace=a.trace||b,this._server_fatal=!1,this._ledger_current_index=undefined,this._ledger_hash=undefined,this._ledger_time=undefined,this._stand_alone=undefined,this._testnet=undefined,this._transaction_subs=0,this.online_target=!1,this._online_state="closed",this.state="offline",this.retry_timer=undefined,this.retry=undefined,this._load_base=256,this._load_factor=1,this._fee_ref=undefined,this._fee_base=undefined,this._reserve_base=undefined,this._reserve_inc=undefined,this._server_status=undefined,this.local_signing&&(this.local_sequence=!0,this.local_fee=!0),this.accounts={},this._accounts={},this.secrets={},this.ledgers={current:{account_root:{}}},this.on("newListener",function(a,b){"transaction"===a&&(!c._transaction_subs&&"open"===c._online_state&&c.request_subscribe(["transactions"]).request(),c._transaction_subs+=1)}),this.on("removeListener",function(a,b){"transaction"===a&&(c._transaction_subs-=1,!c._transaction_subs&&"open"===c._online_state&&c.request_unsubscribe(["transactions"]).request())})};o.prototype=new d,o.from_config=function(a,b){var c="string"==typeof a?m.servers[a]:a,d=new o(c,b);for(var e in m.accounts){var f=m.accounts[e];"object"==typeof f&&f.secret&&(d.set_secret(e,f.secret),d.set_secret(f.account,f.secret))}return d};var p=function(a){return a>=-299&&a<199},q=function(a){return a>=-299&&a<199};o.online_states=["proposing","validating","full"],o.prototype.server_fatal=function(){this._server_fatal=!0},o.prototype._set_state=function(b){this.trace&&a.log("remote: set_state: %s",b);if(this.state!==b){this.state=b,this.emit("state",b);switch(b){case"online":this._online_state="open",this.emit("connect"),this.emit("connected");break;case"offline":this._online_state="closed",this.emit("disconnect"),this.emit("disconnected")}}},o.prototype.set_trace=function(a){return this.trace=undefined===a||a,this},o.prototype.connect=function(a){var b=undefined===a||a;if(this.online_target!=b){this.online_target=b;switch(this._online_state){case"open":b||this._connect_stop();break;case"closed":b&&this._connect_retry()}}return this},o.prototype.ledger_hash=function(){return this._ledger_hash},o.prototype._connect_stop=function(){this.ws&&(delete this.ws.onerror,delete this.ws.onclose,this.ws.close(),delete this.ws),this._set_state("offline")},o.prototype._connect_retry=function(){var b=this;b.online_target?"connecting"!==this._online_state?(this._online_state="connecting",this.retry=0,this._set_state("offline"),this._connect_start()):(this.retry+=1,this.retry_timer=setTimeout(function(){b.trace&&a.log("remote: retry"),b._server_fatal?a.log("FATAL"):b.online_target?b._connect_start():b._connect_retry()},this.retry<40?50:this.retry<100?1e3:this.retry<160?1e4:3e4)):this._set_state("offline")},o.prototype._connect_start=function(){var b=this,d=(this.websocket_ssl?"wss://":"ws://")+this.websocket_ip+":"+this.websocket_port;this.trace&&a.log("remote: connect: %s",d),this.ws&&this._connect_stop();var e=c(25),f=this.ws=new e(d);f.response={},f.onopen=function(){b.trace&&a.log("remote: onopen: %s: online_target=%s",f.readyState,b.online_target),f.onerror=function(){b.trace&&a.log("remote: onerror: %s",f.readyState),delete f.onclose,b._connect_retry()},f.onclose=function(){b.trace&&a.log("remote: onclose: %s",f.readyState),delete f.onerror,b._connect_retry()},b.online_target?b._server_subscribe():b._connect_stop()},f.onerror=function(){b.trace&&a.log("remote: onerror: %s",f.readyState),delete f.onclose,b._connect_retry()},f.onclose=function(){b.trace&&a.log("remote: onclose: %s",f.readyState),delete f.onerror,b._connect_retry()},f.onmessage=function(a){b._connect_message(f,a.data)}},o.prototype._connect_message=function(b,c){var d=this,e=JSON.parse(c),f=!1,g;if("object"!=typeof e)f=!0;else switch(e.type){case"response":g=b.response[e.id],g?"success"===e.status?(this.trace&&l.logObject("remote: response: %s",e),g.emit("success",e.result)):e.error&&(this.trace&&l.logObject("remote: error: %s",e),g.emit("error",{error:"remoteError",error_message:"Remote reported an error.",remote:e})):f=!0;break;case"ledgerClosed":this._ledger_time=e.ledger_time,this._ledger_hash=e.ledger_hash,this._ledger_current_index=e.ledger_index+1,this.emit("ledger_closed",e);break;case"account":this.trace&&l.logObject("remote: account: %s",e),e.mmeta=new j(e.meta);var h=e.mmeta.getAffectedAccounts();for(var i=0,k=h.length;i<k;i++){var m=d._accounts[h[i]];m&&m._subs&&m.emit("transaction",e)}this.emit("account",e);break;case"transaction":this.emit("transaction",e);break;case"serverStatus":this._set_state(o.online_states.indexOf(e.server_status)!==-1?"online":"offline"),"load_base"in e&&"load_factor"in e&&(e.load_base!==this._load_base||e.load_factor!=this._load_factor)&&(this._load_base=e.load_base,this._load_factor=e.load_factor,this.emit("load",{load_base:this._load_base,load_factor:this.load_factor}));break;default:this.trace&&l.logObject("remote: "+e.type+": %s",e),this.emit("net_"+e.type,e)}!f||(this.trusted?(a.log("unexpected message from trusted remote: %s",c),(g||this).emit("error",{error:"remoteUnexpected",error_message:"Unexpected response from remote."})):(this.trace&&a.log("unexpected message from untrusted remote: %s",c),(g||this).emit("error",{error:"remoteDisconnected",error_message:"Remote disconnected."})))},o.prototype.request=function(a){this.ws?(this.ws.response[a.message.id=this.id]=a,this.id+=1,this.trace&&l.logObject("remote: request: %s",a.message),this.ws.send(JSON.stringify(a.message))):this.trace&&l.logObject("remote: request: DROPPING: %s",a.message)},o.prototype.request_server_info=function(){return new n(this,"server_info")},o.prototype.request_ledger=function(a,b){var c=new n(this,"ledger");return a&&(c.message.ledger=a),b&&(c.message.full=!0),c},o.prototype.request_ledger_hash=function(){return new n(this,"ledger_closed")},o.prototype.request_ledger_header=function(){return new n(this,"ledger_header")},o.prototype.request_ledger_current=function(){return new n(this,"ledger_current")},o.prototype.request_ledger_entry=function(a){var b=this,c=new n(this,"ledger_entry");return"account_root"===a&&(c.request_default=c.request,c.request=function(){var d=!0;if(!b._ledger_hash&&"account_root"===a){var e=b.ledgers.current.account_root;e||(e=b.ledgers.current.account_root={});var f=b.ledgers.current.account_root[c.message.account_root];if(f)c.emit("success",{node:f}),d=!1;else switch(a){case"account_root":c.on("success",function(a){b.ledgers.current.account_root[a.node.Account]=a.node});break;default:}}d&&c.request_default()}),c},o.prototype.request_subscribe=function(a){var b=new n(this,"subscribe");return a&&("object"!=typeof a&&(a=[a]),b.message.streams=a),b},o.prototype.request_unsubscribe=function(a){var b=new n(this,"unsubscribe");return a&&("object"!=typeof a&&(a=[a]),b.message.streams=a),b},o.prototype.request_transaction_entry=function(a,b){return(new n(this,"transaction_entry")).ledger_choose(b).tx_hash(a)},o.prototype.request_account_info=function(a){var b=new n(this,"account_info");return b.message.ident=g.json_rewrite(a),b},o.prototype.request_account_lines=function(a,b,c){var d=new n(this,"account_lines");return d.message.account=g.json_rewrite(a),b&&(d.message.index=b),d.ledger_choose(c)},o.prototype.request_account_offers=function(a,b,c){var d=new n(this,"account_offers");return d.message.account=g.json_rewrite(a),b&&(d.message.index=b),d.ledger_choose(c)},o.prototype.request_account_tx=function(a,b,c){var d=new n(this,"account_tx");return d.message.account=a,b===c?d.message.ledger=b:(d.message.ledger_min=b,d.message.ledger_max=c),d},o.prototype.request_ledger=function(a,b){var c=new n(this,"ledger");return c.message.ledger=a,b&&(c.message.full=!0),c},o.prototype.request_wallet_accounts=function(a){l.assert(this.trusted);var b=new n(this,"wallet_accounts");return b.message.seed=a,b},o.prototype.request_sign=function(a,b){l.assert(this.trusted);var c=new n(this,"sign");return c.message.secret=a,c.message.tx_json=b,c},o.prototype.request_submit=function(){var a=this,b=new n(this,"submit");return b},o.prototype._server_subscribe=function(){var a=this,b=["ledger","server"];return this._transaction_subs&&b.push("transactions"),this.request_subscribe(b).on("success",function(b){a._stand_alone=!!b.stand_alone,a._testnet=!!b.testnet,b.random&&a.emit("random",l.hexToArray(b.random)),b.ledger_hash&&b.ledger_index&&(a._ledger_time=b.ledger_time,a._ledger_hash=b.ledger_hash,a._ledger_current_index=b.ledger_index+1,a.emit("ledger_closed",b)),a._load_base=b.load_base||256,a._load_factor=b.load_factor||1,a._fee_ref=b.fee_ref,a._fee_base=b.fee_base,a._reserve_base=b.reserve_base,a._reserve_inc=b.reserve_inc,a._server_status=b.server_status,o.online_states.indexOf(b.server_status)!==-1&&a._set_state("online"),a.emit("subscribed")}).request(),this},o.prototype.ledger_accept=function(){if(this._stand_alone||undefined===this._stand_alone){var a=new n(this,"ledger_accept");a.request()}else this.emit("error",{error:"notStandAlone"});return this},o.prototype.request_account_balance=function(a,b){var c=this.request_ledger_entry("account_root");return c.account_root(a).ledger_choose(b).on("success",function(a){c.emit("account_balance",e.from_json(a.node.Balance))})},o.prototype.request_owner_count=function(a,b){var c=this.request_ledger_entry("account_root");return c.account_root(a).ledger_choose(b).on("success",function(a){c.emit("owner_count",a.node.OwnerCount)})},o.prototype.account=function(a){var b=new i(this,a);return b.is_valid()?this._accounts[b.to_json()]=b:b},o.prototype.book=function(a,b,c,d){var e=new k(this,a,b,c,d);return e},o.prototype.account_seq=function(a,b){var a=g.json_rewrite(a),c=this.accounts[a],d;return c&&c.seq&&(d=c.seq,b==="ADVANCE"&&(c.seq+=1),b==="REWIND"&&(c.seq-=1)),d},o.prototype.set_account_seq=function(a,b){var a=g.json_rewrite(a);this.accounts[a]||(this.accounts[a]={}),this.accounts[a].seq=b},o.prototype.account_seq_cache=function(a,b){var c=this,d;c.accounts[a]||(c.accounts[a]={});var e=c.accounts[a];return d=e.caching_seq_request,d||(d=c.request_ledger_entry("account_root").account_root(a).ledger_choose(b).on("success",function(a){delete e.caching_seq_request;var b=a.node.Sequence;e.seq=b,d.emit("success_account_seq_cache",a)}).on("error",function(a){delete e.caching_seq_request,d.emit("error_account_seq_cache",a)}),e.caching_seq_request=d),d},o.prototype.dirty_account_root=function(a){var a=g.json_rewrite(a);delete this.ledgers.current.account_root[a]},o.prototype.set_secret=function(a,b){this.secrets[a]=b},o.prototype.request_ripple_balance=function(a,b,c,d){var f=this.request_ledger_entry("ripple_state");return f.ripple_state(a,b,c).ledger_choose(d).on("success",function(c){var d=c.node,h=e.from_json(d.LowLimit),i=e.from_json(d.HighLimit),j=e.from_json(d.Balance),k=g.from_json(a).equals(i.issuer()),l=(k?i:h).parse_issuer(a),m=(k?h:i).parse_issuer(b),n=(k?j.negate():j).parse_issuer(a),o=(k?j:j.negate()).parse_issuer(b);f.emit("ripple_state",{issuer_balance:o,account_balance:n,issuer_limit:m,account_limit:l})})},o.prototype.request_ripple_path_find=function(a,b,c,d){var h=this,i=new n(this,"ripple_path_find");return i.message.source_account=g.json_rewrite(a),i.message.destination_account=g.json_rewrite(b),i.message.destination_amount=e.json_rewrite(c),d&&(i.message.source_currencies=d.map(function(a){var b={};return"issuer"in a&&(b.issuer=g.json_rewrite(a.issuer)),"currency"in a&&(b.currency=f.json_rewrite(a.currency)),b})),i},o.prototype.request_unl_list=function(){return new n(this,"unl_list")},o.prototype.request_unl_add=function(a,b){var c=new n(this,"unl_add");return c.message.node=a,b!==undefined&&(c.message.comment=note),c},o.prototype.request_unl_delete=function(a){var b=new n(this,"unl_delete");return b.message.node=a,b},o.prototype.request_peers=function(){return new n(this,"peers")},o.prototype.request_connect=function(a,b){var c=new n(this,"connect");return c.message.ip=a,b&&(c.message.port=b),c},o.prototype.transaction=function(){return new h(this)},b.Remote=o})(c(1))},22:function(a,b,c){function j(a,b){return a[3].id!==b[3].id?a[3].id-b[3].id:a[2]-b[2]}var d=c(13),e=c(3),f=c(4),g=c(16),h=c(12).UInt256,i=function(){this.buffer=[],this.pointer=0};i.from_json=function(a){var b,c=new i;a=f({},a);if("number"==typeof a.TransactionType){a.TransactionType=i.lookup_type_tx(a.TransactionType);if(!a.TransactionType)throw new Error("Transaction type ID is invalid.")}if("string"!=typeof a.TransactionType)throw"undefined"!=typeof a.LedgerEntryType?new Error("Ledger entry binary format not yet implemented."):new Error("Object to be serialized must contain either TransactionType or LedgerEntryType.");return b=d.tx[a.TransactionType].slice(),a.TransactionType=b.shift(),c.serialize(b,a),c},i.prototype.append=function(a){this.buffer=this.buffer.concat(a),this.pointer+=a.length},i.prototype.to_bits=function(){return e.codec.bytes.toBits(this.buffer)},i.prototype.to_hex=function(){return e.codec.hex.fromBits(this.to_bits()).toUpperCase()},i.prototype.serialize=function(a,b){a=i._sort_typedef(a.slice());for(var c=0,d=a.length;c<d;c++){var e=a[c];this.serialize_field(e,b)}},i.prototype.signing_hash=function(a){var b=new i;return g.Int32.serialize(b,a),b.append(this.buffer),b.hash_sha512_half()},i.prototype.hash_sha512_half=function(){var a=e.codec.bytes.toBits(this.buffer),b=e.bitArray.bitSlice(e.hash.sha512.hash(a),0,256);return h.from_hex(e.codec.hex.fromBits(b))},i.prototype.serialize_field=function(a,b){a=a.slice();var c=a.shift(),e=a.shift(),f=a.shift(),g=a.shift();if("undefined"!=typeof b[c]){this.append(i.get_field_header(g.id,f));try{g.serialize(this,b[c])}catch(h){throw h.message="Error serializing '"+c+"': "+h.message,h}}else if(e===d.REQUIRED)throw new Error("Missing required field "+c)},i.get_field_header=function(a,b){var c=[0];return a>15?c.push(a&255):c[0]+=(a&15)<<4,b>15?c.push(b&255):c[0]+=b&15,c},i._sort_typedef=function(a){return a.sort(j)},i.lookup_type_tx=function(a){for(var b in d.tx){if(!d.tx.hasOwnProperty(b))continue;if(d.tx[b][0]===a)return b}return null},b.SerializedObject=i},23:function(a,b,c){var d=c(3),e=c(2).Amount,f=c(2).Currency,g=c(2).UInt160,h=c(15).Seed,i=c(8).EventEmitter,j=c(22).SerializedObject,k=c(6),l=4,m=8,n=function(a){var b=this;this.callback=undefined,this.remote=a,this._secret=undefined,this._build_path=!1,this.tx_json={Flags:0},this.hash=undefined,this.submit_index=undefined,this.state=undefined,this.finalized=!1,this.on("success",function(a){a.engine_result&&(b.hash=a.tx_json.hash,b.set_state("client_proposed"),b.emit("proposed",{tx_json:a.tx_json,result:a.engine_result,result_code:a.engine_result_code,result_message:a.engine_result_message,rejected:b.isRejected(a.engine_result_code)}))}),this.on("error",function(a){b.set_state("remoteError")})};n.prototype=new i,n.fees={"default":e.from_json("10"),nickname_create:e.from_json("1000"),offer:e.from_json("10")},n.flags={OfferCreate:{Passive:65536},Payment:{NoRippleDirect:65536,PartialPayment:131072,LimitQuality:262144}},n.formats=c(13).tx,n.HASH_SIGN=1398036480,n.HASH_SIGN_TESTNET=1937012736,n.prototype.consts={telLOCAL_ERROR:-399,temMALFORMED:-299,tefFAILURE:-199,terRETRY:-99,tesSUCCESS:0,tecCLAIMED:100},n.prototype.isTelLocal=function(a){return a>=this.consts.telLOCAL_ERROR&&a<this.consts.temMALFORMED},n.prototype.isTemMalformed=function(a){return a>=this.consts.temMALFORMED&&a<this.consts.tefFAILURE},n.prototype.isTefFailure=function(a){return a>=this.consts.tefFAILURE&&a<this.consts.terRETRY},n.prototype.isTerRetry=function(a){return a>=this.consts.terRETRY&&a<this.consts.tesSUCCESS},n.prototype.isTepSuccess=function(a){return a>=this.consts.tesSUCCESS},n.prototype.isTecClaimed=function(a){return a>=this.consts.tecCLAIMED},n.prototype.isRejected=function(a){return this.isTelLocal(a)||this.isTemMalformed(a)||this.isTefFailure(a)},n.prototype.set_state=function(a){this.state!==a&&(this.state=a,this.emit("state",a))},n.prototype.complete=function(){var a=this.tx_json;this.remote.local_fee&&undefined===a.Fee&&(a.Fee=n.fees["default"].to_json());if(this.remote.local_signing&&undefined===a.SigningPubKey){var b=h.from_json(this._secret),c=b.get_key(this.tx_json.Account);a.SigningPubKey=c.to_hex_pub()}},n.prototype.serialize=function(){return j.from_json(this.tx_json)},n.prototype.signing_hash=function(){var a=k.testnet?n.HASH_SIGN_TESTNET:n.HASH_SIGN;return j.from_json(this.tx_json).signing_hash(a)},n.prototype.sign=function(){var a=h.from_json(this._secret),b=this.signing_hash(),c=a.get_key(this.tx_json.Account),e=c.sign(b,0),f=d.codec.hex.fromBits(e).toUpperCase();this.tx_json.TxnSignature=f},n.prototype.submit=function(a){var b=this,c=this.tx_json;this.callback=a;if("string"!=typeof c.Account)return(this.callback||this.emit)("error",{error:"tejInvalidAccount",error_message:"Bad account."}),this;this.complete();if(this.callback||this.listeners("final").length||this.listeners("lost").length||this.listeners("pending").length){this.submit_index=this.remote._ledger_current_index;var d=function(a){var c=a.ledger_hash,e=a.ledger_index,f=!1;b.remote.request_transaction_entry(b.hash).ledger_hash(c).on("success",function(a){if(b.finalized)return;b.set_state(a.metadata.TransactionResult),b.remote.removeListener("ledger_closed",d),b.emit("final",a),b.finalized=!0,b.callback&&b.callback(a.metadata.TransactionResult,a)}).on("error",function(a){if(b.finalized)return;"remoteError"===a.error&&"transactionNotFound"===a.remote.error&&(b.submit_index+m<e?(b.set_state("client_lost"),b.emit("lost"),b.callback&&b.callback("tejLost",a),b.remote.removeListener("ledger_closed",d),b.emit("final",a),b.finalized=!0):b.submit_index+l<e?(b.set_state("client_missing"),b.emit("pending")):b.emit("pending"))}).request()};this.remote.on("ledger_closed",d),this.callback&&this.on("error",function(a){b.callback(a.error,a)})}this.set_state("client_submitted");if(b.remote.local_sequence&&!b.tx_json.Sequence){b.tx_json.Sequence=this.remote.account_seq(b.tx_json.Account,"ADVANCE");if(!b.tx_json.Sequence)return this.remote.account_seq_cache(b.tx_json.Account,!1).on("success_account_seq_cache",function(){b.submit()}).on("error_account_seq_cache",function(a){b.remote.account_seq_cache(b.tx_json.Account,"CURRENT").on("success_account_seq_cache",function(){b.submit()}).on("error_account_seq_cache",function(a){b.emit("error",a)}).request()}).request(),this;this.on("success",function(a){if(!a||"string"!=typeof a.engine_result)return;switch(a.engine_result.slice(0,3)){case"tej":b.remote.account_seq(b.tx_json.Account,"REWIND");break;case"tel":case"tem":case"tef":b.remote.account_seq(b.tx_json.Account,"REWIND")}})}var e=this.remote.request_submit();e.on("success",function(a){b.emit("success",a)}),e.on("error",function(a){b.emit("error",a)});if(!this._secret&&!this.tx_json.Signature)return this.emit("error",{result:"tejSecretUnknown",result_message:"Could not sign transactions because we."}),this;if(this.remote.local_signing)this.sign(),e.tx_blob(this.serialize().to_hex());else{if(!this.remote.trusted)return this.emit("error",{result:"tejServerUntrusted",result_message:"Attempt to give a secret to an untrusted server."}),this;e.secret(this._secret),e.build_path(this._build_path),e.tx_json(this.tx_json)}return e.request(),this},n.prototype.build_path=function(a){return this._build_path=a,this},n.prototype.destination_tag=function(a){return undefined!==a&&(this.tx_json.DestinationTag=a),this},n._path_rewrite=function(a){var b=[];for(var c=0,d=a.length;c<d;c++){var e=a[c],h={};"account"in e&&(h.account=g.json_rewrite(e.account)),"issuer"in e&&(h.issuer=g.json_rewrite(e.issuer)),"currency"in e&&(h.currency=f.json_rewrite(e.currency)),b.push(h)}return b},n.prototype.path_add=function(a){return this.tx_json.Paths=this.tx_json.Paths||[],this.tx_json.Paths.push(n._path_rewrite(a)),this},n.prototype.paths=function(a){for(var b=0,c=a.length;b<c;b++)this.path_add(a[b]);return this},n.prototype.secret=function(a){this._secret=a},n.prototype.send_max=function(a){return a&&(this.tx_json.SendMax=e.json_rewrite(a)),this},n.prototype.source_tag=function(a){return undefined!==a&&(this.tx_json.SourceTag=a),this},n.prototype.transfer_rate=function(a){this.tx_json.TransferRate=Number(a);if(this.tx_json.TransferRate<1e9)throw"invalidTransferRate";return this},n.prototype.set_flags=function(a){if(a){var b=n.flags[this.tx_json.TransactionType];undefined==this.tx_json.Flags&&(this.tx_json.Flags=0);var c="object"==typeof a?a:[a];for(var d in c){if(!c.hasOwnProperty(d))continue;var e=c[d];e in b&&(this.tx_json.Flags+=b[e])}}return this},n.prototype._account_secret=function(a){return this.remote.secrets[a]},n.prototype.account_set=function(a){return this._secret=this._account_secret(a),this.tx_json.TransactionType="AccountSet",this.tx_json.Account=g.json_rewrite(a),this},n.prototype.claim=function(a,b,c,d){return this._secret=this._account_secret(a),this.tx_json.TransactionType="Claim",this.tx_json.Generator=b,this.tx_json.PublicKey=c,this.tx_json.Signature=d,this},n.prototype.offer_cancel=function(a,b){return this._secret=this._account_secret(a),this.tx_json.TransactionType="OfferCancel",this.tx_json.Account=g.json_rewrite(a),this.tx_json.OfferSequence=Number(b),this},n.prototype.offer_create=function(a,b,c,d){return this._secret=this._account_secret(a),this.tx_json.TransactionType="OfferCreate",this.tx_json.Account=g.json_rewrite(a),this.tx_json.TakerPays=e.json_rewrite(b),this.tx_json.TakerGets=e.json_rewrite(c),this.remote.local_fee&&(this.tx_json.Fee=n.fees.offer.to_json()),d&&(this.tx_json.Expiration=Date===d.constructor?d.getTime():Number(d)),this},n.prototype.password_fund=function(a,b){return this._secret=this._account_secret(a),this.tx_json.TransactionType="PasswordFund",this.tx_json.Destination=g.json_rewrite(b),this},n.prototype.password_set=function(a,b,c,d,e){return this._secret=this._account_secret(a),this.tx_json.TransactionType="PasswordSet",this.tx_json.RegularKey=b,this.tx_json.Generator=c,this.tx_json.PublicKey=d,this.tx_json.Signature=e,this},n.prototype.payment=function(a,b,c){return this._secret=this._account_secret(a),this.tx_json.TransactionType="Payment",this.tx_json.Account=g.json_rewrite(a),this.tx_json.Amount=e.json_rewrite(c),this.tx_json.Destination=g.json_rewrite(b),this},n.prototype.ripple_line_set=function(a,b,c,d){return this._secret=this._account_secret(a),this.tx_json.TransactionType="TrustSet",this.tx_json.Account=g.json_rewrite(a),undefined!==b&&(this.tx_json.LimitAmount=e.json_rewrite(b)),c&&(this.tx_json.QualityIn=c),d&&(this.tx_json.QualityOut=d),this},n.prototype.wallet_add=function(a,b,c,d,f){return this._secret=this._account_secret(a),this.tx_json.TransactionType="WalletAdd",this.tx_json.Amount=e.json_rewrite(b),this.tx_json.RegularKey=c,this.tx_json.PublicKey=d,this.tx_json.Signature=f,this},b.Transaction=n},24:function(a,b,c){(function(a){Function.prototype.method=function(a,b){return this.prototype[a]=b,this};var c=function(a,b){return function(c){b(c.code!==a?c:undefined)}},d=function(a){return function(b){if(b)throw b;a()}},e=function(b,c){return function(){a.log("%s: %s",e,arguments.toString),c(arguments)}},f=function(a,b){var c,d=new Array(a);for(c=0;c<a;c++)d[c]=b;return d},g=function(a){var b=[],c=0;a.length%2&&(b.push(String.fromCharCode(parseInt(a.substring(0,1),16))),c=1);for(;c!=a.length;c+=2)b.push(String.fromCharCode(parseInt(a.substring(c,c+2),16)));return b.join("")},h=function(a){return Array.prototype.map.call(a,function(a){var b=a.charCodeAt(0);return b<16?"0"+b.toString(16):b.toString(16)}).join("")},i=function(a){var b=new Array(a.length),c;for(c=0;c!=b.length;c+=1)b[c]=a.charCodeAt(c);return b},j=function(a){return i(g(a))},k=function(a,b,c){var d=[],e=0,f=a.length;c&&(e=a.length%b,e&&d.push(a.slice(0,e)));for(;e<f;e+=b)d.push(a.slice(e,b+e));return d},l=function(b,c){a.log(b,JSON.stringify(c,undefined,2))},m=function(a,b){if(!a)throw new Error("Assertion failed"+(b?": "+b:"."))};b.trace=e,b.arraySet=f,b.hexToString=g,b.hexToArray=j,b.stringToArray=i,b.stringToHex=h,b.chunkString=k,b.logObject=l,b.assert=m})(c(1))},25:function(a,b,c){a.exports=WebSocket}})